shadow$provide.module$node_modules$$firebase$functions$dist$index_cjs=function(global,process,require,module,exports,shadow$shims){function codeForHTTPStatus(status){if(200<=status&&300>status)return"ok";switch(status){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";
case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function mapValues(o,f){var result={},key;for(key in o)o.hasOwnProperty(key)&&(result[key]=f(o[key]));return result}function failAfter(millis){return new Promise(function(_,reject){setTimeout(function(){reject(new HttpsErrorImpl("deadline-exceeded","deadline-exceeded"))},millis)})}function factory(app,unused,region){return new Service(app,region)}function registerFunctions(instance){instance.INTERNAL.registerService("functions",
factory,{Functions:Service},void 0,!0)}Object.defineProperty(exports,"__esModule",{value:!0});global=function(ex){return ex&&"object"===typeof ex&&"default"in ex?ex["default"]:ex}(require("module$node_modules$$firebase$app$dist$index_cjs"));var tslib_1=require("module$node_modules$tslib$tslib"),errorCodeMap={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",
UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},HttpsErrorImpl=function(_super){function HttpsErrorImpl(code,message,details){message=_super.call(this,message)||this;Object.setPrototypeOf(message,HttpsErrorImpl.prototype);message.code=code;message.details=details;return message}tslib_1.__extends(HttpsErrorImpl,
_super);return HttpsErrorImpl}(Error),ContextProvider$jscomp$0=function(){function ContextProvider(app){this.app=app}ContextProvider.prototype.getAuthToken=function(){return tslib_1.__awaiter(this,void 0,void 0,function(){var token;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(token=_a.sent())?[2,token.accessToken]:[2,void 0];case 2:return _a.sent(),[2,void 0];case 3:return[2]}})})};ContextProvider.prototype.getInstanceIdToken=
function(){return tslib_1.__awaiter(this,void 0,void 0,function(){var messaging,token;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:_a.trys.push([0,2,,3]);if(!this.app.messaging)return[2,void 0];messaging=this.app.messaging();return[4,messaging.getToken()];case 1:return(token=_a.sent())?[2,token]:[2,void 0];case 2:return _a.sent(),[2,void 0];case 3:return[2]}})})};ContextProvider.prototype.getContext=function(){return tslib_1.__awaiter(this,void 0,void 0,function(){var authToken,
instanceIdToken;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:return[4,this.getAuthToken()];case 1:return authToken=_a.sent(),[4,this.getInstanceIdToken()];case 2:return instanceIdToken=_a.sent(),[2,{authToken:authToken,instanceIdToken:instanceIdToken}]}})})};return ContextProvider}(),Serializer=function(){function Serializer(){}Serializer.prototype.encode=function(data){var _this=this;if(null===data||void 0===data)return null;data instanceof Number&&(data=data.valueOf());if("number"===
typeof data&&isFinite(data)||!0===data||!1===data||"[object String]"===Object.prototype.toString.call(data))return data;if(Array.isArray(data))return data.map(function(x){return _this.encode(x)});if("function"===typeof data||"object"===typeof data)return mapValues(data,function(x){return _this.encode(x)});throw Error("Data cannot be encoded in JSON: "+data);};Serializer.prototype.decode=function(json){var _this=this;if(null===json)return json;if(json["@type"])switch(json["@type"]){case "type.googleapis.com/google.protobuf.Int64Value":case "type.googleapis.com/google.protobuf.UInt64Value":var value=
parseFloat(json.value);if(isNaN(value))throw Error("Data cannot be decoded from JSON: "+json);return value;default:throw Error("Data cannot be decoded from JSON: "+json);}return Array.isArray(json)?json.map(function(x){return _this.decode(x)}):"function"===typeof json||"object"===typeof json?mapValues(json,function(x){return _this.decode(x)}):json};return Serializer}(),Service=function(){function Service(app_,region_){void 0===region_&&(region_="us-central1");this.app_=app_;this.region_=region_;this.serializer=
new Serializer;this.emulatorOrigin=null;this.contextProvider=new ContextProvider$jscomp$0(app_)}Object.defineProperty(Service.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0});Service.prototype._url=function(name){var projectId=this.app_.options.projectId,region=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+projectId+"/"+region+"/"+name:"https://"+region+"-"+projectId+".cloudfunctions.net/"+name};Service.prototype.useFunctionsEmulator=function(origin){this.emulatorOrigin=
origin};Service.prototype.httpsCallable=function(name,options){var _this=this;return function(data){return _this.call(name,data,options||{})}};Service.prototype.postJSON=function(url,body,headers){return tslib_1.__awaiter(this,void 0,void 0,function(){var response,json;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:headers.append("Content-Type","application/json"),_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,fetch(url,{method:"POST",body:JSON.stringify(body),headers:headers})];
case 2:return response=_a.sent(),[3,4];case 3:return _a.sent(),[2,{status:0,json:null}];case 4:json=null,_a.label=5;case 5:return _a.trys.push([5,7,,8]),[4,response.json()];case 6:return json=_a.sent(),[3,8];case 7:return _a.sent(),[3,8];case 8:return[2,{status:response.status,json:json}]}})})};Service.prototype.call=function(name,data,options){return tslib_1.__awaiter(this,void 0,void 0,function(){var url,body,headers,context,timeout,response,error,responseData,decodedData;return tslib_1.__generator(this,
function(_a){switch(_a.label){case 0:return url=this._url(name),data=this.serializer.encode(data),body={data:data},headers=new Headers,[4,this.contextProvider.getContext()];case 1:return context=_a.sent(),context.authToken&&headers.append("Authorization","Bearer "+context.authToken),context.instanceIdToken&&headers.append("Firebase-Instance-ID-Token",context.instanceIdToken),timeout=options.timeout||7E4,[4,Promise.race([this.postJSON(url,body,headers),failAfter(timeout)])];case 2:response=_a.sent();
a:{_a=response.json;var serializer=this.serializer,code=codeForHTTPStatus(response.status),description=code,details=void 0;try{var errorJSON=_a.error;if(errorJSON){var status_1=errorJSON.status;if("string"===typeof status_1){if(!errorCodeMap[status_1]){error=new HttpsErrorImpl("internal","internal");break a}code=errorCodeMap[status_1]}description=status_1;var message=errorJSON.message;"string"===typeof message&&(description=message);details=errorJSON.details;void 0!==details&&(details=serializer.decode(details))}}catch(e){}error=
"ok"===code?null:new HttpsErrorImpl(code,description,details)}if(error)throw error;if(!response.json)throw new HttpsErrorImpl("internal","Response is not valid JSON object.");responseData=response.json.data;"undefined"===typeof responseData&&(responseData=response.json.result);if("undefined"===typeof responseData)throw new HttpsErrorImpl("internal","Response is missing data field.");decodedData=this.serializer.decode(responseData);return[2,{data:decodedData}]}})})};return Service}();registerFunctions(global);
exports.registerFunctions=registerFunctions}
//# sourceMappingURL=module$node_modules$$firebase$functions$dist$index_cjs.js.map
