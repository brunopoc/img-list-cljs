{
"version":3,
"file":"module$node_modules$$firebase$storage$dist$index_cjs.js",
"lineCount":102,
"mappings":"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",
"sources":["node_modules/@firebase/storage/dist/index.cjs.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$firebase$storage$dist$index_cjs\"] = function(global,process,require,module,exports,shadow$shims) {\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar firebase = _interopDefault(require('@firebase/app'));\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Constants used in the Firebase Storage library.\r\n */\r\n/**\r\n * Domain and scheme for API calls.\r\n */\r\nvar domainBase = 'https://firebasestorage.googleapis.com';\r\n/**\r\n * Domain and scheme for object downloads.\r\n */\r\nvar downloadBase = 'https://firebasestorage.googleapis.com';\r\n/**\r\n * Base URL for non-upload calls to the API.\r\n */\r\nvar apiBaseUrl = '/v0';\r\n/**\r\n * Base URL for upload calls to the API.\r\n */\r\nvar apiUploadBaseUrl = '/v0';\r\nvar configOption = 'storageBucket';\r\n/**\r\n * 2 minutes\r\n */\r\nvar defaultMaxOperationRetryTime = 2 * 60 * 1000;\r\n/**\r\n * 10 minutes\r\n */\r\nvar defaultMaxUploadRetryTime = 10 * 60 * 100;\r\n/**\r\n * This is the value of Number.MIN_SAFE_INTEGER, which is not well supported\r\n * enough for us to use it directly.\r\n */\r\nvar minSafeInteger = -9007199254740991;\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar FirebaseStorageError = /** @class */ (function () {\r\n    function FirebaseStorageError(code, message) {\r\n        this.code_ = prependCode(code);\r\n        this.message_ = 'Firebase Storage: ' + message;\r\n        this.serverResponse_ = null;\r\n        this.name_ = 'FirebaseError';\r\n    }\r\n    FirebaseStorageError.prototype.codeProp = function () {\r\n        return this.code;\r\n    };\r\n    FirebaseStorageError.prototype.codeEquals = function (code) {\r\n        return prependCode(code) === this.codeProp();\r\n    };\r\n    FirebaseStorageError.prototype.serverResponseProp = function () {\r\n        return this.serverResponse_;\r\n    };\r\n    FirebaseStorageError.prototype.setServerResponseProp = function (serverResponse) {\r\n        this.serverResponse_ = serverResponse;\r\n    };\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"name\", {\r\n        get: function () {\r\n            return this.name_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"code\", {\r\n        get: function () {\r\n            return this.code_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"message\", {\r\n        get: function () {\r\n            return this.message_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"serverResponse\", {\r\n        get: function () {\r\n            return this.serverResponse_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FirebaseStorageError;\r\n}());\r\nvar Code = {\r\n    // Shared between all platforms\r\n    UNKNOWN: 'unknown',\r\n    OBJECT_NOT_FOUND: 'object-not-found',\r\n    BUCKET_NOT_FOUND: 'bucket-not-found',\r\n    PROJECT_NOT_FOUND: 'project-not-found',\r\n    QUOTA_EXCEEDED: 'quota-exceeded',\r\n    UNAUTHENTICATED: 'unauthenticated',\r\n    UNAUTHORIZED: 'unauthorized',\r\n    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',\r\n    INVALID_CHECKSUM: 'invalid-checksum',\r\n    CANCELED: 'canceled',\r\n    // JS specific\r\n    INVALID_EVENT_NAME: 'invalid-event-name',\r\n    INVALID_URL: 'invalid-url',\r\n    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',\r\n    NO_DEFAULT_BUCKET: 'no-default-bucket',\r\n    CANNOT_SLICE_BLOB: 'cannot-slice-blob',\r\n    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',\r\n    NO_DOWNLOAD_URL: 'no-download-url',\r\n    INVALID_ARGUMENT: 'invalid-argument',\r\n    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',\r\n    APP_DELETED: 'app-deleted',\r\n    INVALID_ROOT_OPERATION: 'invalid-root-operation',\r\n    INVALID_FORMAT: 'invalid-format',\r\n    INTERNAL_ERROR: 'internal-error'\r\n};\r\nfunction prependCode(code) {\r\n    return 'storage/' + code;\r\n}\r\nfunction unknown() {\r\n    var message = 'An unknown error occurred, please check the error payload for ' +\r\n        'server response.';\r\n    return new FirebaseStorageError(Code.UNKNOWN, message);\r\n}\r\nfunction objectNotFound(path) {\r\n    return new FirebaseStorageError(Code.OBJECT_NOT_FOUND, \"Object '\" + path + \"' does not exist.\");\r\n}\r\nfunction quotaExceeded(bucket) {\r\n    return new FirebaseStorageError(Code.QUOTA_EXCEEDED, \"Quota for bucket '\" +\r\n        bucket +\r\n        \"' exceeded, please view quota on \" +\r\n        'https://firebase.google.com/pricing/.');\r\n}\r\nfunction unauthenticated() {\r\n    var message = 'User is not authenticated, please authenticate using Firebase ' +\r\n        'Authentication and try again.';\r\n    return new FirebaseStorageError(Code.UNAUTHENTICATED, message);\r\n}\r\nfunction unauthorized(path) {\r\n    return new FirebaseStorageError(Code.UNAUTHORIZED, \"User does not have permission to access '\" + path + \"'.\");\r\n}\r\nfunction retryLimitExceeded() {\r\n    return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED, 'Max retry time for operation exceeded, please try again.');\r\n}\r\nfunction canceled() {\r\n    return new FirebaseStorageError(Code.CANCELED, 'User canceled the upload/download.');\r\n}\r\nfunction invalidUrl(url) {\r\n    return new FirebaseStorageError(Code.INVALID_URL, \"Invalid URL '\" + url + \"'.\");\r\n}\r\nfunction invalidDefaultBucket(bucket) {\r\n    return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + bucket + \"'.\");\r\n}\r\nfunction cannotSliceBlob() {\r\n    return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB, 'Cannot slice blob for upload. Please retry the upload.');\r\n}\r\nfunction serverFileWrongSize() {\r\n    return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE, 'Server recorded incorrect upload file size, please retry the upload.');\r\n}\r\nfunction noDownloadURL() {\r\n    return new FirebaseStorageError(Code.NO_DOWNLOAD_URL, 'The given file does not have any download URLs.');\r\n}\r\nfunction invalidArgument(index, fnName, message) {\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT, 'Invalid argument in `' + fnName + '` at index ' + index + ': ' + message);\r\n}\r\nfunction invalidArgumentCount(argMin, argMax, fnName, real) {\r\n    var countPart;\r\n    var plural;\r\n    if (argMin === argMax) {\r\n        countPart = argMin;\r\n        plural = argMin === 1 ? 'argument' : 'arguments';\r\n    }\r\n    else {\r\n        countPart = 'between ' + argMin + ' and ' + argMax;\r\n        plural = 'arguments';\r\n    }\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT_COUNT, 'Invalid argument count in `' +\r\n        fnName +\r\n        '`: Expected ' +\r\n        countPart +\r\n        ' ' +\r\n        plural +\r\n        ', received ' +\r\n        real +\r\n        '.');\r\n}\r\nfunction appDeleted() {\r\n    return new FirebaseStorageError(Code.APP_DELETED, 'The Firebase app was deleted.');\r\n}\r\n/**\r\n * @param name The name of the operation that was invalid.\r\n */\r\nfunction invalidRootOperation(name) {\r\n    return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION, \"The operation '\" +\r\n        name +\r\n        \"' cannot be performed on a root reference, create a non-root \" +\r\n        \"reference using child, such as .child('file.png').\");\r\n}\r\n/**\r\n * @param format The format that was not valid.\r\n * @param message A message describing the format violation.\r\n */\r\nfunction invalidFormat(format, message) {\r\n    return new FirebaseStorageError(Code.INVALID_FORMAT, \"String does not match format '\" + format + \"': \" + message);\r\n}\r\n/**\r\n * @param message A message describing the internal error.\r\n */\r\nfunction internalError(message) {\r\n    throw new FirebaseStorageError(Code.INTERNAL_ERROR, 'Internal error: ' + message);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar StringFormat = {\r\n    RAW: 'raw',\r\n    BASE64: 'base64',\r\n    BASE64URL: 'base64url',\r\n    DATA_URL: 'data_url'\r\n};\r\nfunction formatValidator(stringFormat) {\r\n    switch (stringFormat) {\r\n        case StringFormat.RAW:\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n        case StringFormat.DATA_URL:\r\n            return;\r\n        default:\r\n            throw 'Expected one of the event types: [' +\r\n                StringFormat.RAW +\r\n                ', ' +\r\n                StringFormat.BASE64 +\r\n                ', ' +\r\n                StringFormat.BASE64URL +\r\n                ', ' +\r\n                StringFormat.DATA_URL +\r\n                '].';\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar StringData = /** @class */ (function () {\r\n    function StringData(data, opt_contentType) {\r\n        this.data = data;\r\n        this.contentType = opt_contentType || null;\r\n    }\r\n    return StringData;\r\n}());\r\nfunction dataFromString(format, string) {\r\n    switch (format) {\r\n        case StringFormat.RAW:\r\n            return new StringData(utf8Bytes_(string));\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n            return new StringData(base64Bytes_(format, string));\r\n        case StringFormat.DATA_URL:\r\n            return new StringData(dataURLBytes_(string), dataURLContentType_(string));\r\n    }\r\n    // assert(false);\r\n    throw unknown();\r\n}\r\nfunction utf8Bytes_(string) {\r\n    var b = [];\r\n    for (var i = 0; i < string.length; i++) {\r\n        var c = string.charCodeAt(i);\r\n        if (c <= 127) {\r\n            b.push(c);\r\n        }\r\n        else {\r\n            if (c <= 2047) {\r\n                b.push(192 | (c >> 6), 128 | (c & 63));\r\n            }\r\n            else {\r\n                if ((c & 64512) == 55296) {\r\n                    // The start of a surrogate pair.\r\n                    var valid = i < string.length - 1 &&\r\n                        (string.charCodeAt(i + 1) & 64512) == 56320;\r\n                    if (!valid) {\r\n                        // The second surrogate wasn't there.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        var hi = c;\r\n                        var lo = string.charCodeAt(++i);\r\n                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\r\n                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n                else {\r\n                    if ((c & 64512) == 56320) {\r\n                        // Invalid low surrogate.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return new Uint8Array(b);\r\n}\r\nfunction percentEncodedBytes_(string) {\r\n    var decoded;\r\n    try {\r\n        decoded = decodeURIComponent(string);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\r\n    }\r\n    return utf8Bytes_(decoded);\r\n}\r\nfunction base64Bytes_(format, string) {\r\n    switch (format) {\r\n        case StringFormat.BASE64: {\r\n            var hasMinus = string.indexOf('-') !== -1;\r\n            var hasUnder = string.indexOf('_') !== -1;\r\n            if (hasMinus || hasUnder) {\r\n                var invalidChar = hasMinus ? '-' : '_';\r\n                throw invalidFormat(format, \"Invalid character '\" +\r\n                    invalidChar +\r\n                    \"' found: is it base64url encoded?\");\r\n            }\r\n            break;\r\n        }\r\n        case StringFormat.BASE64URL: {\r\n            var hasPlus = string.indexOf('+') !== -1;\r\n            var hasSlash = string.indexOf('/') !== -1;\r\n            if (hasPlus || hasSlash) {\r\n                var invalidChar = hasPlus ? '+' : '/';\r\n                throw invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\r\n            }\r\n            string = string.replace(/-/g, '+').replace(/_/g, '/');\r\n            break;\r\n        }\r\n    }\r\n    var bytes;\r\n    try {\r\n        bytes = atob(string);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(format, 'Invalid character found');\r\n    }\r\n    var array = new Uint8Array(bytes.length);\r\n    for (var i = 0; i < bytes.length; i++) {\r\n        array[i] = bytes.charCodeAt(i);\r\n    }\r\n    return array;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar DataURLParts = /** @class */ (function () {\r\n    function DataURLParts(dataURL) {\r\n        this.base64 = false;\r\n        this.contentType = null;\r\n        var matches = dataURL.match(/^data:([^,]+)?,/);\r\n        if (matches === null) {\r\n            throw invalidFormat(StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\r\n        }\r\n        var middle = matches[1] || null;\r\n        if (middle != null) {\r\n            this.base64 = endsWith(middle, ';base64');\r\n            this.contentType = this.base64\r\n                ? middle.substring(0, middle.length - ';base64'.length)\r\n                : middle;\r\n        }\r\n        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\r\n    }\r\n    return DataURLParts;\r\n}());\r\nfunction dataURLBytes_(string) {\r\n    var parts = new DataURLParts(string);\r\n    if (parts.base64) {\r\n        return base64Bytes_(StringFormat.BASE64, parts.rest);\r\n    }\r\n    else {\r\n        return percentEncodedBytes_(parts.rest);\r\n    }\r\n}\r\nfunction dataURLContentType_(string) {\r\n    var parts = new DataURLParts(string);\r\n    return parts.contentType;\r\n}\r\nfunction endsWith(s, end) {\r\n    var longEnough = s.length >= end.length;\r\n    if (!longEnough) {\r\n        return false;\r\n    }\r\n    return s.substring(s.length - end.length) === end;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar TaskEvent = {\r\n    /** Triggered whenever the task changes or progress is updated. */\r\n    STATE_CHANGED: 'state_changed'\r\n};\r\nvar InternalTaskState = {\r\n    RUNNING: 'running',\r\n    PAUSING: 'pausing',\r\n    PAUSED: 'paused',\r\n    SUCCESS: 'success',\r\n    CANCELING: 'canceling',\r\n    CANCELED: 'canceled',\r\n    ERROR: 'error'\r\n};\r\nvar TaskState = {\r\n    /** The task is currently transferring data. */\r\n    RUNNING: 'running',\r\n    /** The task was paused by the user. */\r\n    PAUSED: 'paused',\r\n    /** The task completed successfully. */\r\n    SUCCESS: 'success',\r\n    /** The task was canceled. */\r\n    CANCELED: 'canceled',\r\n    /** The task failed with an error. */\r\n    ERROR: 'error'\r\n};\r\nfunction taskStateFromInternalTaskState(state) {\r\n    switch (state) {\r\n        case InternalTaskState.RUNNING:\r\n        case InternalTaskState.PAUSING:\r\n        case InternalTaskState.CANCELING:\r\n            return TaskState.RUNNING;\r\n        case InternalTaskState.PAUSED:\r\n            return TaskState.PAUSED;\r\n        case InternalTaskState.SUCCESS:\r\n            return TaskState.SUCCESS;\r\n        case InternalTaskState.CANCELED:\r\n            return TaskState.CANCELED;\r\n        case InternalTaskState.ERROR:\r\n            return TaskState.ERROR;\r\n        default:\r\n            // TODO(andysoto): assert(false);\r\n            return TaskState.ERROR;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Contains methods for working with objects.\r\n */\r\nfunction contains(obj, prop) {\r\n    return Object.prototype.hasOwnProperty.call(obj, prop);\r\n}\r\nfunction forEach(obj, f) {\r\n    for (var key in obj) {\r\n        if (contains(obj, key)) {\r\n            f(key, obj[key]);\r\n        }\r\n    }\r\n}\r\nfunction clone(obj) {\r\n    if (obj == null) {\r\n        return {};\r\n    }\r\n    var c = {};\r\n    forEach(obj, function (key, val) {\r\n        c[key] = val;\r\n    });\r\n    return c;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Implements the promise abstraction interface for external\r\n * (public SDK) packaging, which just passes through to the firebase-app impl.\r\n */\r\n/**\r\n * @template T\r\n * @param {function((function(T): void),\r\n *                  (function(!Error): void))} resolver\r\n */\r\nfunction make(resolver) {\r\n    return new Promise(resolver);\r\n}\r\n/**\r\n * @template T\r\n */\r\nfunction resolve(value) {\r\n    return Promise.resolve(value);\r\n}\r\nfunction reject(error) {\r\n    return Promise.reject(error);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @return False if the object is undefined or null, true otherwise.\r\n */\r\nfunction isDef(p) {\r\n    return p != null;\r\n}\r\nfunction isJustDef(p) {\r\n    return p !== void 0;\r\n}\r\nfunction isFunction(p) {\r\n    return typeof p === 'function';\r\n}\r\nfunction isObject(p) {\r\n    return typeof p === 'object';\r\n}\r\nfunction isNonNullObject(p) {\r\n    return isObject(p) && p !== null;\r\n}\r\nfunction isNonArrayObject(p) {\r\n    return isObject(p) && !Array.isArray(p);\r\n}\r\nfunction isString(p) {\r\n    return typeof p === 'string' || p instanceof String;\r\n}\r\nfunction isNumber(p) {\r\n    return typeof p === 'number' || p instanceof Number;\r\n}\r\nfunction isNativeBlob(p) {\r\n    return isNativeBlobDefined() && p instanceof Blob;\r\n}\r\nfunction isNativeBlobDefined() {\r\n    return typeof Blob !== 'undefined';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @enum{number}\r\n */\r\nvar ErrorCode;\r\n(function (ErrorCode) {\r\n    ErrorCode[ErrorCode[\"NO_ERROR\"] = 0] = \"NO_ERROR\";\r\n    ErrorCode[ErrorCode[\"NETWORK_ERROR\"] = 1] = \"NETWORK_ERROR\";\r\n    ErrorCode[ErrorCode[\"ABORT\"] = 2] = \"ABORT\";\r\n})(ErrorCode || (ErrorCode = {}));\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * We use this instead of goog.net.XhrIo because goog.net.XhrIo is hyuuuuge and\r\n * doesn't work in React Native on Android.\r\n */\r\nvar NetworkXhrIo = /** @class */ (function () {\r\n    function NetworkXhrIo() {\r\n        var _this = this;\r\n        this.sent_ = false;\r\n        this.xhr_ = new XMLHttpRequest();\r\n        this.errorCode_ = ErrorCode.NO_ERROR;\r\n        this.sendPromise_ = make(function (resolve, reject) {\r\n            _this.xhr_.addEventListener('abort', function (event) {\r\n                _this.errorCode_ = ErrorCode.ABORT;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('error', function (event) {\r\n                _this.errorCode_ = ErrorCode.NETWORK_ERROR;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('load', function (event) {\r\n                resolve(_this);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.send = function (url, method, opt_body, opt_headers) {\r\n        var _this = this;\r\n        if (this.sent_) {\r\n            throw internalError('cannot .send() more than once');\r\n        }\r\n        this.sent_ = true;\r\n        this.xhr_.open(method, url, true);\r\n        if (isDef(opt_headers)) {\r\n            var headers = opt_headers;\r\n            forEach(headers, function (key, val) {\r\n                _this.xhr_.setRequestHeader(key, val.toString());\r\n            });\r\n        }\r\n        if (isDef(opt_body)) {\r\n            this.xhr_.send(opt_body);\r\n        }\r\n        else {\r\n            this.xhr_.send();\r\n        }\r\n        return this.sendPromise_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getErrorCode = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getErrorCode() before sending');\r\n        }\r\n        return this.errorCode_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getStatus = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getStatus() before sending');\r\n        }\r\n        try {\r\n            return this.xhr_.status;\r\n        }\r\n        catch (e) {\r\n            return -1;\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseText = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getResponseText() before sending');\r\n        }\r\n        return this.xhr_.responseText;\r\n    };\r\n    /**\r\n     * Aborts the request.\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.abort = function () {\r\n        this.xhr_.abort();\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseHeader = function (header) {\r\n        return this.xhr_.getResponseHeader(header);\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.addUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.addEventListener('progress', listener);\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.removeUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.removeEventListener('progress', listener);\r\n        }\r\n    };\r\n    return NetworkXhrIo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Factory-like class for creating XhrIo instances.\r\n */\r\nvar XhrIoPool = /** @class */ (function () {\r\n    function XhrIoPool() {\r\n    }\r\n    XhrIoPool.prototype.createXhrIo = function () {\r\n        return new NetworkXhrIo();\r\n    };\r\n    return XhrIoPool;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the Object resulting from parsing the given JSON, or null if the\r\n * given string does not represent a JSON object.\r\n */\r\nfunction jsonObjectOrNull(s) {\r\n    var obj;\r\n    try {\r\n        obj = JSON.parse(s);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n    if (isNonArrayObject(obj)) {\r\n        return obj;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Location = /** @class */ (function () {\r\n    function Location(bucket, path) {\r\n        this.bucket = bucket;\r\n        this.path_ = path;\r\n    }\r\n    Object.defineProperty(Location.prototype, \"path\", {\r\n        get: function () {\r\n            return this.path_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Location.prototype.fullServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\r\n    };\r\n    Location.prototype.bucketOnlyServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o';\r\n    };\r\n    Location.makeFromBucketSpec = function (bucketString) {\r\n        var bucketLocation;\r\n        try {\r\n            bucketLocation = Location.makeFromUrl(bucketString);\r\n        }\r\n        catch (e) {\r\n            // Not valid URL, use as-is. This lets you put bare bucket names in\r\n            // config.\r\n            return new Location(bucketString, '');\r\n        }\r\n        if (bucketLocation.path === '') {\r\n            return bucketLocation;\r\n        }\r\n        else {\r\n            throw invalidDefaultBucket(bucketString);\r\n        }\r\n    };\r\n    Location.makeFromUrl = function (url) {\r\n        var location = null;\r\n        var bucketDomain = '([A-Za-z0-9.\\\\-_]+)';\r\n        function gsModify(loc) {\r\n            if (loc.path.charAt(loc.path.length - 1) === '/') {\r\n                loc.path_ = loc.path_.slice(0, -1);\r\n            }\r\n        }\r\n        var gsPath = '(/(.*))?$';\r\n        var path = '(/([^?#]*).*)?$';\r\n        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\r\n        var gsIndices = { bucket: 1, path: 3 };\r\n        function httpModify(loc) {\r\n            loc.path_ = decodeURIComponent(loc.path);\r\n        }\r\n        var version = 'v[A-Za-z0-9_]+';\r\n        var httpRegex = new RegExp('^https?://firebasestorage\\\\.googleapis\\\\.com/' +\r\n            version +\r\n            '/b/' +\r\n            bucketDomain +\r\n            '/o' +\r\n            path, 'i');\r\n        var httpIndices = { bucket: 1, path: 3 };\r\n        var groups = [\r\n            { regex: gsRegex, indices: gsIndices, postModify: gsModify },\r\n            { regex: httpRegex, indices: httpIndices, postModify: httpModify }\r\n        ];\r\n        for (var i = 0; i < groups.length; i++) {\r\n            var group = groups[i];\r\n            var captures = group.regex.exec(url);\r\n            if (captures) {\r\n                var bucketValue = captures[group.indices.bucket];\r\n                var pathValue = captures[group.indices.path];\r\n                if (!pathValue) {\r\n                    pathValue = '';\r\n                }\r\n                location = new Location(bucketValue, pathValue);\r\n                group.postModify(location);\r\n                break;\r\n            }\r\n        }\r\n        if (location == null) {\r\n            throw invalidUrl(url);\r\n        }\r\n        return location;\r\n    };\r\n    return Location;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Contains helper methods for manipulating paths.\r\n */\r\n/**\r\n * @return Null if the path is already at the root.\r\n */\r\nfunction parent(path) {\r\n    if (path.length == 0) {\r\n        return null;\r\n    }\r\n    var index = path.lastIndexOf('/');\r\n    if (index === -1) {\r\n        return '';\r\n    }\r\n    var newPath = path.slice(0, index);\r\n    return newPath;\r\n}\r\nfunction child(path, childPath) {\r\n    var canonicalChildPath = childPath\r\n        .split('/')\r\n        .filter(function (component) {\r\n        return component.length > 0;\r\n    })\r\n        .join('/');\r\n    if (path.length === 0) {\r\n        return canonicalChildPath;\r\n    }\r\n    else {\r\n        return path + '/' + canonicalChildPath;\r\n    }\r\n}\r\n/**\r\n * Returns the last component of a path.\r\n * '/foo/bar' -> 'bar'\r\n * '/foo/bar/baz/' -> 'baz/'\r\n * '/a' -> 'a'\r\n */\r\nfunction lastComponent(path) {\r\n    var index = path.lastIndexOf('/', path.length - 2);\r\n    if (index === -1) {\r\n        return path;\r\n    }\r\n    else {\r\n        return path.slice(index + 1);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction makeNormalUrl(urlPart) {\r\n    return domainBase + apiBaseUrl + urlPart;\r\n}\r\nfunction makeDownloadUrl(urlPart) {\r\n    return downloadBase + apiBaseUrl + urlPart;\r\n}\r\nfunction makeUploadUrl(urlPart) {\r\n    return domainBase + apiUploadBaseUrl + urlPart;\r\n}\r\nfunction makeQueryString(params) {\r\n    var encode = encodeURIComponent;\r\n    var queryPart = '?';\r\n    forEach(params, function (key, val) {\r\n        var nextPart = encode(key) + '=' + encode(val);\r\n        queryPart = queryPart + nextPart + '&';\r\n    });\r\n    // Chop off the extra '&' or '?' on the end\r\n    queryPart = queryPart.slice(0, -1);\r\n    return queryPart;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction noXform_(metadata, value) {\r\n    return value;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar Mapping = /** @class */ (function () {\r\n    function Mapping(server, opt_local, opt_writable, opt_xform) {\r\n        this.server = server;\r\n        this.local = opt_local || server;\r\n        this.writable = !!opt_writable;\r\n        this.xform = opt_xform || noXform_;\r\n    }\r\n    return Mapping;\r\n}());\r\nvar mappings_ = null;\r\nfunction xformPath(fullPath) {\r\n    var valid = isString(fullPath);\r\n    if (!valid || fullPath.length < 2) {\r\n        return fullPath;\r\n    }\r\n    else {\r\n        fullPath = fullPath;\r\n        return lastComponent(fullPath);\r\n    }\r\n}\r\nfunction getMappings() {\r\n    if (mappings_) {\r\n        return mappings_;\r\n    }\r\n    var mappings = [];\r\n    mappings.push(new Mapping('bucket'));\r\n    mappings.push(new Mapping('generation'));\r\n    mappings.push(new Mapping('metageneration'));\r\n    mappings.push(new Mapping('name', 'fullPath', true));\r\n    function mappingsXformPath(metadata, fullPath) {\r\n        return xformPath(fullPath);\r\n    }\r\n    var nameMapping = new Mapping('name');\r\n    nameMapping.xform = mappingsXformPath;\r\n    mappings.push(nameMapping);\r\n    /**\r\n     * Coerces the second param to a number, if it is defined.\r\n     */\r\n    function xformSize(metadata, size) {\r\n        if (isDef(size)) {\r\n            return +size;\r\n        }\r\n        else {\r\n            return size;\r\n        }\r\n    }\r\n    var sizeMapping = new Mapping('size');\r\n    sizeMapping.xform = xformSize;\r\n    mappings.push(sizeMapping);\r\n    mappings.push(new Mapping('timeCreated'));\r\n    mappings.push(new Mapping('updated'));\r\n    mappings.push(new Mapping('md5Hash', null, true));\r\n    mappings.push(new Mapping('cacheControl', null, true));\r\n    mappings.push(new Mapping('contentDisposition', null, true));\r\n    mappings.push(new Mapping('contentEncoding', null, true));\r\n    mappings.push(new Mapping('contentLanguage', null, true));\r\n    mappings.push(new Mapping('contentType', null, true));\r\n    mappings.push(new Mapping('metadata', 'customMetadata', true));\r\n    mappings_ = mappings;\r\n    return mappings_;\r\n}\r\nfunction addRef(metadata, authWrapper) {\r\n    function generateRef() {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var loc = new Location(bucket, path);\r\n        return authWrapper.makeStorageReference(loc);\r\n    }\r\n    Object.defineProperty(metadata, 'ref', { get: generateRef });\r\n}\r\nfunction fromResource(authWrapper, resource, mappings) {\r\n    var metadata = {};\r\n    metadata['type'] = 'file';\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        metadata[mapping.local] = mapping.xform(metadata, resource[mapping.server]);\r\n    }\r\n    addRef(metadata, authWrapper);\r\n    return metadata;\r\n}\r\nfunction fromResourceString(authWrapper, resourceString, mappings) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromResource(authWrapper, resource, mappings);\r\n}\r\nfunction downloadUrlFromResourceString(metadata, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    if (!isString(obj['downloadTokens'])) {\r\n        // This can happen if objects are uploaded through GCS and retrieved\r\n        // through list, so we don't want to throw an Error.\r\n        return null;\r\n    }\r\n    var tokens = obj['downloadTokens'];\r\n    if (tokens.length === 0) {\r\n        return null;\r\n    }\r\n    var encode = encodeURIComponent;\r\n    var tokensList = tokens.split(',');\r\n    var urls = tokensList.map(function (token) {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\r\n        var base = makeDownloadUrl(urlPart);\r\n        var queryString = makeQueryString({\r\n            alt: 'media',\r\n            token: token\r\n        });\r\n        return base + queryString;\r\n    });\r\n    return urls[0];\r\n}\r\nfunction toResourceString(metadata, mappings) {\r\n    var resource = {};\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        if (mapping.writable) {\r\n            resource[mapping.server] = metadata[mapping.local];\r\n        }\r\n    }\r\n    return JSON.stringify(resource);\r\n}\r\nfunction metadataValidator(p) {\r\n    var validType = p && isObject(p);\r\n    if (!validType) {\r\n        throw 'Expected Metadata object.';\r\n    }\r\n    for (var key in p) {\r\n        var val = p[key];\r\n        if (key === 'customMetadata') {\r\n            if (!isObject(val)) {\r\n                throw 'Expected object for \\'customMetadata\\' mapping.';\r\n            }\r\n        }\r\n        else {\r\n            if (isNonNullObject(val)) {\r\n                throw \"Mapping for '\" + key + \"' cannot be an object.\";\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param name Name of the function.\r\n * @param specs Argument specs.\r\n * @param passed The actual arguments passed to the function.\r\n * @throws {fbs.Error} If the arguments are invalid.\r\n */\r\nfunction validate(name, specs, passed) {\r\n    var minArgs = specs.length;\r\n    var maxArgs = specs.length;\r\n    for (var i = 0; i < specs.length; i++) {\r\n        if (specs[i].optional) {\r\n            minArgs = i;\r\n            break;\r\n        }\r\n    }\r\n    var validLength = minArgs <= passed.length && passed.length <= maxArgs;\r\n    if (!validLength) {\r\n        throw invalidArgumentCount(minArgs, maxArgs, name, passed.length);\r\n    }\r\n    for (var i = 0; i < passed.length; i++) {\r\n        try {\r\n            specs[i].validator(passed[i]);\r\n        }\r\n        catch (e) {\r\n            if (e instanceof Error) {\r\n                throw invalidArgument(i, name, e.message);\r\n            }\r\n            else {\r\n                throw invalidArgument(i, name, e);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar ArgSpec = /** @class */ (function () {\r\n    function ArgSpec(validator, opt_optional) {\r\n        var self = this;\r\n        this.validator = function (p) {\r\n            if (self.optional && !isJustDef(p)) {\r\n                return;\r\n            }\r\n            validator(p);\r\n        };\r\n        this.optional = !!opt_optional;\r\n    }\r\n    return ArgSpec;\r\n}());\r\nfunction and_(v1, v2) {\r\n    return function (p) {\r\n        v1(p);\r\n        v2(p);\r\n    };\r\n}\r\nfunction stringSpec(opt_validator, opt_optional) {\r\n    function stringValidator(p) {\r\n        if (!isString(p)) {\r\n            throw 'Expected string.';\r\n        }\r\n    }\r\n    var validator;\r\n    if (opt_validator) {\r\n        validator = and_(stringValidator, opt_validator);\r\n    }\r\n    else {\r\n        validator = stringValidator;\r\n    }\r\n    return new ArgSpec(validator, opt_optional);\r\n}\r\nfunction uploadDataSpec() {\r\n    function validator(p) {\r\n        var valid = p instanceof Uint8Array ||\r\n            p instanceof ArrayBuffer ||\r\n            (isNativeBlobDefined() && p instanceof Blob);\r\n        if (!valid) {\r\n            throw 'Expected Blob or File.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction metadataSpec(opt_optional) {\r\n    return new ArgSpec(metadataValidator, opt_optional);\r\n}\r\nfunction nonNegativeNumberSpec() {\r\n    function validator(p) {\r\n        var valid = isNumber(p) && p >= 0;\r\n        if (!valid) {\r\n            throw 'Expected a number 0 or greater.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction looseObjectSpec(opt_validator, opt_optional) {\r\n    function validator(p) {\r\n        var isLooseObject = p === null || (isDef(p) && p instanceof Object);\r\n        if (!isLooseObject) {\r\n            throw 'Expected an Object.';\r\n        }\r\n        if (opt_validator !== undefined && opt_validator !== null) {\r\n            opt_validator(p);\r\n        }\r\n    }\r\n    return new ArgSpec(validator, opt_optional);\r\n}\r\nfunction nullFunctionSpec(opt_optional) {\r\n    function validator(p) {\r\n        var valid = p === null || isFunction(p);\r\n        if (!valid) {\r\n            throw 'Expected a Function.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator, opt_optional);\r\n}\n\nfunction getBlobBuilder() {\r\n    if (typeof BlobBuilder !== 'undefined') {\r\n        return BlobBuilder;\r\n    }\r\n    else if (typeof WebKitBlobBuilder !== 'undefined') {\r\n        return WebKitBlobBuilder;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * Concatenates one or more values together and converts them to a Blob.\r\n *\r\n * @param var_args The values that will make up the resulting blob.\r\n * @return The blob.\r\n */\r\nfunction getBlob() {\r\n    var var_args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        var_args[_i] = arguments[_i];\r\n    }\r\n    var BlobBuilder = getBlobBuilder();\r\n    if (BlobBuilder !== undefined) {\r\n        var bb = new BlobBuilder();\r\n        for (var i = 0; i < var_args.length; i++) {\r\n            bb.append(var_args[i]);\r\n        }\r\n        return bb.getBlob();\r\n    }\r\n    else {\r\n        if (isNativeBlobDefined()) {\r\n            return new Blob(var_args);\r\n        }\r\n        else {\r\n            throw Error(\"This browser doesn't seem to support creating Blobs\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * Slices the blob. The returned blob contains data from the start byte\r\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\r\n *\r\n * @param blob The blob to be sliced.\r\n * @param start Index of the starting byte.\r\n * @param end Index of the ending byte.\r\n * @return The blob slice or null if not supported.\r\n */\r\nfunction sliceBlob(blob, start, end) {\r\n    if (blob.webkitSlice) {\r\n        return blob.webkitSlice(start, end);\r\n    }\r\n    else if (blob.mozSlice) {\r\n        return blob.mozSlice(start, end);\r\n    }\r\n    else if (blob.slice) {\r\n        return blob.slice(start, end);\r\n    }\r\n    return null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param opt_elideCopy If true, doesn't copy mutable input data\r\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\r\n *     modified after this blob's construction.\r\n */\r\nvar FbsBlob = /** @class */ (function () {\r\n    function FbsBlob(data, opt_elideCopy) {\r\n        var size = 0;\r\n        var blobType = '';\r\n        if (isNativeBlob(data)) {\r\n            this.data_ = data;\r\n            size = data.size;\r\n            blobType = data.type;\r\n        }\r\n        else if (data instanceof ArrayBuffer) {\r\n            if (opt_elideCopy) {\r\n                this.data_ = new Uint8Array(data);\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.byteLength);\r\n                this.data_.set(new Uint8Array(data));\r\n            }\r\n            size = this.data_.length;\r\n        }\r\n        else if (data instanceof Uint8Array) {\r\n            if (opt_elideCopy) {\r\n                this.data_ = data;\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.length);\r\n                this.data_.set(data);\r\n            }\r\n            size = data.length;\r\n        }\r\n        this.size_ = size;\r\n        this.type_ = blobType;\r\n    }\r\n    FbsBlob.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    FbsBlob.prototype.type = function () {\r\n        return this.type_;\r\n    };\r\n    FbsBlob.prototype.slice = function (startByte, endByte) {\r\n        if (isNativeBlob(this.data_)) {\r\n            var realBlob = this.data_;\r\n            var sliced = sliceBlob(realBlob, startByte, endByte);\r\n            if (sliced === null) {\r\n                return null;\r\n            }\r\n            return new FbsBlob(sliced);\r\n        }\r\n        else {\r\n            var slice = new Uint8Array(this.data_.buffer, startByte, endByte - startByte);\r\n            return new FbsBlob(slice, true);\r\n        }\r\n    };\r\n    FbsBlob.getBlob = function () {\r\n        var var_args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            var_args[_i] = arguments[_i];\r\n        }\r\n        if (isNativeBlobDefined()) {\r\n            var blobby = var_args.map(function (val) {\r\n                if (val instanceof FbsBlob) {\r\n                    return val.data_;\r\n                }\r\n                else {\r\n                    return val;\r\n                }\r\n            });\r\n            return new FbsBlob(getBlob.apply(null, blobby));\r\n        }\r\n        else {\r\n            var uint8Arrays = var_args.map(function (val) {\r\n                if (isString(val)) {\r\n                    return dataFromString(StringFormat.RAW, val).data;\r\n                }\r\n                else {\r\n                    // Blobs don't exist, so this has to be a Uint8Array.\r\n                    return val.data_;\r\n                }\r\n            });\r\n            var finalLength_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                finalLength_1 += array.byteLength;\r\n            });\r\n            var merged_1 = new Uint8Array(finalLength_1);\r\n            var index_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    merged_1[index_1++] = array[i];\r\n                }\r\n            });\r\n            return new FbsBlob(merged_1, true);\r\n        }\r\n    };\r\n    FbsBlob.prototype.uploadData = function () {\r\n        return this.data_;\r\n    };\r\n    return FbsBlob;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns true if the object is contained in the array (compared with ===).\r\n * @template T\r\n */\r\nfunction contains$1(array, elem) {\r\n    return array.indexOf(elem) !== -1;\r\n}\r\n/**\r\n * Returns a shallow copy of the array or array-like object (e.g. arguments).\r\n * @template T\r\n */\r\nfunction clone$1(arraylike) {\r\n    return Array.prototype.slice.call(arraylike);\r\n}\r\n/**\r\n * Removes the given element from the given array, if it is contained.\r\n * Directly modifies the passed-in array.\r\n * @template T\r\n */\r\nfunction remove(array, elem) {\r\n    var i = array.indexOf(elem);\r\n    if (i !== -1) {\r\n        array.splice(i, 1);\r\n    }\r\n}\n\nvar RequestInfo = /** @class */ (function () {\r\n    function RequestInfo(url, method, \r\n    /**\r\n     * Returns the value with which to resolve the request's promise. Only called\r\n     * if the request is successful. Throw from this function to reject the\r\n     * returned Request's promise with the thrown error.\r\n     * Note: The XhrIo passed to this function may be reused after this callback\r\n     * returns. Do not keep a reference to it in any way.\r\n     */\r\n    handler, timeout) {\r\n        this.url = url;\r\n        this.method = method;\r\n        this.handler = handler;\r\n        this.timeout = timeout;\r\n        this.urlParams = {};\r\n        this.headers = {};\r\n        this.body = null;\r\n        this.errorHandler = null;\r\n        /**\r\n         * Called with the current number of bytes uploaded and total size (-1 if not\r\n         * computable) of the request body (i.e. used to report upload progress).\r\n         */\r\n        this.progressCallback = null;\r\n        this.successCodes = [200];\r\n        this.additionalRetryCodes = [];\r\n    }\r\n    return RequestInfo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws the UNKNOWN FirebaseStorageError if cndn is false.\r\n */\r\nfunction handlerCheck(cndn) {\r\n    if (!cndn) {\r\n        throw unknown();\r\n    }\r\n}\r\nfunction metadataHandler(authWrapper, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(authWrapper, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return metadata;\r\n    }\r\n    return handler;\r\n}\r\nfunction downloadUrlHandler(authWrapper, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(authWrapper, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return downloadUrlFromResourceString(metadata, text);\r\n    }\r\n    return handler;\r\n}\r\nfunction sharedErrorHandler(location) {\r\n    function errorHandler(xhr, err) {\r\n        var newErr;\r\n        if (xhr.getStatus() === 401) {\r\n            newErr = unauthenticated();\r\n        }\r\n        else {\r\n            if (xhr.getStatus() === 402) {\r\n                newErr = quotaExceeded(location.bucket);\r\n            }\r\n            else {\r\n                if (xhr.getStatus() === 403) {\r\n                    newErr = unauthorized(location.path);\r\n                }\r\n                else {\r\n                    newErr = err;\r\n                }\r\n            }\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction objectErrorHandler(location) {\r\n    var shared = sharedErrorHandler(location);\r\n    function errorHandler(xhr, err) {\r\n        var newErr = shared(xhr, err);\r\n        if (xhr.getStatus() === 404) {\r\n            newErr = objectNotFound(location.path);\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction getMetadata(authWrapper, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeNormalUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction getDownloadUrl(authWrapper, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeNormalUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, downloadUrlHandler(authWrapper, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction updateMetadata(authWrapper, location, metadata, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeNormalUrl(urlPart);\r\n    var method = 'PATCH';\r\n    var body = toResourceString(metadata, mappings);\r\n    var headers = { 'Content-Type': 'application/json; charset=utf-8' };\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction deleteObject(authWrapper, location) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeNormalUrl(urlPart);\r\n    var method = 'DELETE';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    function handler(xhr, text) { }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.successCodes = [200, 204];\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction determineContentType_(metadata, blob) {\r\n    return ((metadata && metadata['contentType']) ||\r\n        (blob && blob.type()) ||\r\n        'application/octet-stream');\r\n}\r\nfunction metadataForUpload_(location, blob, opt_metadata) {\r\n    var metadata = clone(opt_metadata);\r\n    metadata['fullPath'] = location.path;\r\n    metadata['size'] = blob.size();\r\n    if (!metadata['contentType']) {\r\n        metadata['contentType'] = determineContentType_(null, blob);\r\n    }\r\n    return metadata;\r\n}\r\nfunction multipartUpload(authWrapper, location, mappings, blob, opt_metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'multipart'\r\n    };\r\n    function genBoundary() {\r\n        var str = '';\r\n        for (var i = 0; i < 2; i++) {\r\n            str =\r\n                str +\r\n                    Math.random()\r\n                        .toString()\r\n                        .slice(2);\r\n        }\r\n        return str;\r\n    }\r\n    var boundary = genBoundary();\r\n    headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\r\n    var metadata = metadataForUpload_(location, blob, opt_metadata);\r\n    var metadataString = toResourceString(metadata, mappings);\r\n    var preBlobPart = '--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\r\n        metadataString +\r\n        '\\r\\n--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: ' +\r\n        metadata['contentType'] +\r\n        '\\r\\n\\r\\n';\r\n    var postBlobPart = '\\r\\n--' + boundary + '--';\r\n    var body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    var urlParams = { name: metadata['fullPath'] };\r\n    var url = makeUploadUrl(urlPart);\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param current The number of bytes that have been uploaded so far.\r\n * @param total The total number of bytes in the upload.\r\n * @param opt_finalized True if the server has finished the upload.\r\n * @param opt_metadata The upload metadata, should\r\n *     only be passed if opt_finalized is true.\r\n * @struct\r\n */\r\nvar ResumableUploadStatus = /** @class */ (function () {\r\n    function ResumableUploadStatus(current, total, finalized, metadata) {\r\n        this.current = current;\r\n        this.total = total;\r\n        this.finalized = !!finalized;\r\n        this.metadata = metadata || null;\r\n    }\r\n    return ResumableUploadStatus;\r\n}());\r\nfunction checkResumeHeader_(xhr, opt_allowed) {\r\n    var status;\r\n    try {\r\n        status = xhr.getResponseHeader('X-Goog-Upload-Status');\r\n    }\r\n    catch (e) {\r\n        handlerCheck(false);\r\n    }\r\n    var allowed = opt_allowed || ['active'];\r\n    handlerCheck(contains$1(allowed, status));\r\n    return status;\r\n}\r\nfunction createResumableUpload(authWrapper, location, mappings, blob, opt_metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var metadata = metadataForUpload_(location, blob, opt_metadata);\r\n    var urlParams = { name: metadata['fullPath'] };\r\n    var url = makeUploadUrl(urlPart);\r\n    var method = 'POST';\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'resumable',\r\n        'X-Goog-Upload-Command': 'start',\r\n        'X-Goog-Upload-Header-Content-Length': blob.size(),\r\n        'X-Goog-Upload-Header-Content-Type': metadata['contentType'],\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    };\r\n    var body = toResourceString(metadata, mappings);\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    function handler(xhr, text) {\r\n        checkResumeHeader_(xhr);\r\n        var url;\r\n        try {\r\n            url = xhr.getResponseHeader('X-Goog-Upload-URL');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        handlerCheck(isString(url));\r\n        return url;\r\n    }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n */\r\nfunction getResumableUploadStatus(authWrapper, location, url, blob) {\r\n    var headers = { 'X-Goog-Upload-Command': 'query' };\r\n    function handler(xhr, text) {\r\n        var status = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var sizeString;\r\n        try {\r\n            sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        var size = parseInt(sizeString, 10);\r\n        handlerCheck(!isNaN(size));\r\n        return new ResumableUploadStatus(size, blob.size(), status === 'final');\r\n    }\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * Any uploads via the resumable upload API must transfer a number of bytes\r\n * that is a multiple of this number.\r\n */\r\nvar resumableUploadChunkSize = 256 * 1024;\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n * @param chunkSize Number of bytes to upload.\r\n * @param opt_status The previous status.\r\n *     If not passed or null, we start from the beginning.\r\n * @throws fbs.Error If the upload is already complete, the passed in status\r\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\r\n *     for upload.\r\n */\r\nfunction continueResumableUpload(location, authWrapper, url, blob, chunkSize, mappings, opt_status, opt_progressCallback) {\r\n    // TODO(andysoto): standardize on internal asserts\r\n    // assert(!(opt_status && opt_status.finalized));\r\n    var status = new ResumableUploadStatus(0, 0);\r\n    if (opt_status) {\r\n        status.current = opt_status.current;\r\n        status.total = opt_status.total;\r\n    }\r\n    else {\r\n        status.current = 0;\r\n        status.total = blob.size();\r\n    }\r\n    if (blob.size() !== status.total) {\r\n        throw serverFileWrongSize();\r\n    }\r\n    var bytesLeft = status.total - status.current;\r\n    var bytesToUpload = bytesLeft;\r\n    if (chunkSize > 0) {\r\n        bytesToUpload = Math.min(bytesToUpload, chunkSize);\r\n    }\r\n    var startByte = status.current;\r\n    var endByte = startByte + bytesToUpload;\r\n    var uploadCommand = bytesToUpload === bytesLeft ? 'upload, finalize' : 'upload';\r\n    var headers = {\r\n        'X-Goog-Upload-Command': uploadCommand,\r\n        'X-Goog-Upload-Offset': status.current\r\n    };\r\n    var body = blob.slice(startByte, endByte);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    function handler(xhr, text) {\r\n        // TODO(andysoto): Verify the MD5 of each uploaded range:\r\n        // the 'x-range-md5' header comes back with status code 308 responses.\r\n        // We'll only be able to bail out though, because you can't re-upload a\r\n        // range that you previously uploaded.\r\n        var uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var newCurrent = status.current + bytesToUpload;\r\n        var size = blob.size();\r\n        var metadata;\r\n        if (uploadStatus === 'final') {\r\n            metadata = metadataHandler(authWrapper, mappings)(xhr, text);\r\n        }\r\n        else {\r\n            metadata = null;\r\n        }\r\n        return new ResumableUploadStatus(newCurrent, size, uploadStatus === 'final', metadata);\r\n    }\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.progressCallback = opt_progressCallback || null;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Observer = /** @class */ (function () {\r\n    function Observer(nextOrObserver, opt_error, opt_complete) {\r\n        var asFunctions = isFunction(nextOrObserver) ||\r\n            isDef(opt_error) ||\r\n            isDef(opt_complete);\r\n        if (asFunctions) {\r\n            this.next = nextOrObserver;\r\n            this.error = opt_error || null;\r\n            this.complete = opt_complete || null;\r\n        }\r\n        else {\r\n            var observer = nextOrObserver;\r\n            this.next = observer.next || null;\r\n            this.error = observer.error || null;\r\n            this.complete = observer.complete || null;\r\n        }\r\n    }\r\n    return Observer;\r\n}());\n\nvar UploadTaskSnapshot = /** @class */ (function () {\r\n    function UploadTaskSnapshot(bytesTransferred, totalBytes, state, metadata, task, ref) {\r\n        this.bytesTransferred = bytesTransferred;\r\n        this.totalBytes = totalBytes;\r\n        this.state = state;\r\n        this.metadata = metadata;\r\n        this.task = task;\r\n        this.ref = ref;\r\n    }\r\n    return UploadTaskSnapshot;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a function that invokes f with its arguments asynchronously as a\r\n * microtask, i.e. as soon as possible after the current script returns back\r\n * into browser code.\r\n */\r\nfunction async(f) {\r\n    return function () {\r\n        var argsToForward = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            argsToForward[_i] = arguments[_i];\r\n        }\r\n        resolve(true).then(function () {\r\n            f.apply(null, argsToForward);\r\n        });\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Represents a blob being uploaded. Can be used to pause/resume/cancel the\r\n * upload and manage callbacks for various events.\r\n */\r\nvar UploadTask = /** @class */ (function () {\r\n    /**\r\n     * @param ref The firebaseStorage.Reference object this task came\r\n     *     from, untyped to avoid cyclic dependencies.\r\n     * @param blob The blob to upload.\r\n     */\r\n    function UploadTask(ref, authWrapper, location, mappings, blob, metadata) {\r\n        if (metadata === void 0) { metadata = null; }\r\n        var _this = this;\r\n        this.transferred_ = 0;\r\n        this.needToFetchStatus_ = false;\r\n        this.needToFetchMetadata_ = false;\r\n        this.observers_ = [];\r\n        this.error_ = null;\r\n        this.uploadUrl_ = null;\r\n        this.request_ = null;\r\n        this.chunkMultiplier_ = 1;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.ref_ = ref;\r\n        this.authWrapper_ = authWrapper;\r\n        this.location_ = location;\r\n        this.blob_ = blob;\r\n        this.metadata_ = metadata;\r\n        this.mappings_ = mappings;\r\n        this.resumable_ = this.shouldDoResumable_(this.blob_);\r\n        this.state_ = InternalTaskState.RUNNING;\r\n        this.errorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            _this.chunkMultiplier_ = 1;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.needToFetchStatus_ = true;\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.metadataErrorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.promise_ = make(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n        // Prevent uncaught rejections on the internal promise from bubbling out\r\n        // to the top level with a dummy handler.\r\n        this.promise_.then(null, function () { });\r\n    }\r\n    UploadTask.prototype.makeProgressCallback_ = function () {\r\n        var _this = this;\r\n        var sizeBefore = this.transferred_;\r\n        return function (loaded, total) {\r\n            _this.updateProgress_(sizeBefore + loaded);\r\n        };\r\n    };\r\n    UploadTask.prototype.shouldDoResumable_ = function (blob) {\r\n        return blob.size() > 256 * 1024;\r\n    };\r\n    UploadTask.prototype.start_ = function () {\r\n        if (this.state_ !== InternalTaskState.RUNNING) {\r\n            // This can happen if someone pauses us in a resume callback, for example.\r\n            return;\r\n        }\r\n        if (this.request_ !== null) {\r\n            return;\r\n        }\r\n        if (this.resumable_) {\r\n            if (this.uploadUrl_ === null) {\r\n                this.createResumable_();\r\n            }\r\n            else {\r\n                if (this.needToFetchStatus_) {\r\n                    this.fetchStatus_();\r\n                }\r\n                else {\r\n                    if (this.needToFetchMetadata_) {\r\n                        // Happens if we miss the metadata on upload completion.\r\n                        this.fetchMetadata_();\r\n                    }\r\n                    else {\r\n                        this.continueUpload_();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.oneShotUpload_();\r\n        }\r\n    };\r\n    UploadTask.prototype.resolveToken_ = function (callback) {\r\n        var _this = this;\r\n        this.authWrapper_.getAuthToken().then(function (authToken) {\r\n            switch (_this.state_) {\r\n                case InternalTaskState.RUNNING:\r\n                    callback(authToken);\r\n                    break;\r\n                case InternalTaskState.CANCELING:\r\n                    _this.transition_(InternalTaskState.CANCELED);\r\n                    break;\r\n                case InternalTaskState.PAUSING:\r\n                    _this.transition_(InternalTaskState.PAUSED);\r\n                    break;\r\n                default:\r\n            }\r\n        });\r\n    };\r\n    // TODO(andysoto): assert false\r\n    UploadTask.prototype.createResumable_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = createResumableUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var createRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = createRequest;\r\n            createRequest.getPromise().then(function (url) {\r\n                _this.request_ = null;\r\n                _this.uploadUrl_ = url;\r\n                _this.needToFetchStatus_ = false;\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.fetchStatus_ = function () {\r\n        var _this = this;\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getResumableUploadStatus(_this.authWrapper_, _this.location_, url, _this.blob_);\r\n            var statusRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = statusRequest;\r\n            statusRequest.getPromise().then(function (status) {\r\n                status = status;\r\n                _this.request_ = null;\r\n                _this.updateProgress_(status.current);\r\n                _this.needToFetchStatus_ = false;\r\n                if (status.finalized) {\r\n                    _this.needToFetchMetadata_ = true;\r\n                }\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.continueUpload_ = function () {\r\n        var _this = this;\r\n        var chunkSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        var status = new ResumableUploadStatus(this.transferred_, this.blob_.size());\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo;\r\n            try {\r\n                requestInfo = continueResumableUpload(_this.location_, _this.authWrapper_, url, _this.blob_, chunkSize, _this.mappings_, status, _this.makeProgressCallback_());\r\n            }\r\n            catch (e) {\r\n                _this.error_ = e;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n                return;\r\n            }\r\n            var uploadRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = uploadRequest;\r\n            uploadRequest\r\n                .getPromise()\r\n                .then(function (newStatus) {\r\n                _this.increaseMultiplier_();\r\n                _this.request_ = null;\r\n                _this.updateProgress_(newStatus.current);\r\n                if (newStatus.finalized) {\r\n                    _this.metadata_ = newStatus.metadata;\r\n                    _this.transition_(InternalTaskState.SUCCESS);\r\n                }\r\n                else {\r\n                    _this.completeTransitions_();\r\n                }\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.increaseMultiplier_ = function () {\r\n        var currentSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        // Max chunk size is 32M.\r\n        if (currentSize < 32 * 1024 * 1024) {\r\n            this.chunkMultiplier_ *= 2;\r\n        }\r\n    };\r\n    UploadTask.prototype.fetchMetadata_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getMetadata(_this.authWrapper_, _this.location_, _this.mappings_);\r\n            var metadataRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = metadataRequest;\r\n            metadataRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.metadataErrorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.oneShotUpload_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = multipartUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var multipartRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = multipartRequest;\r\n            multipartRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.updateProgress_(_this.blob_.size());\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.updateProgress_ = function (transferred) {\r\n        var old = this.transferred_;\r\n        this.transferred_ = transferred;\r\n        // A progress update can make the \"transferred\" value smaller (e.g. a\r\n        // partial upload not completed by server, after which the \"transferred\"\r\n        // value may reset to the value at the beginning of the request).\r\n        if (this.transferred_ !== old) {\r\n            this.notifyObservers_();\r\n        }\r\n    };\r\n    UploadTask.prototype.transition_ = function (state) {\r\n        if (this.state_ === state) {\r\n            return;\r\n        }\r\n        switch (state) {\r\n            case InternalTaskState.CANCELING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                var wasPaused = this.state_ === InternalTaskState.PAUSED;\r\n                this.state_ = state;\r\n                if (wasPaused) {\r\n                    this.notifyObservers_();\r\n                    this.start_();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.CANCELED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.error_ = canceled();\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.ERROR:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.SUCCESS:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n        }\r\n    };\r\n    UploadTask.prototype.completeTransitions_ = function () {\r\n        switch (this.state_) {\r\n            case InternalTaskState.PAUSING:\r\n                this.transition_(InternalTaskState.PAUSED);\r\n                break;\r\n            case InternalTaskState.CANCELING:\r\n                this.transition_(InternalTaskState.CANCELED);\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                this.start_();\r\n                break;\r\n            default:\r\n                // TODO(andysoto): assert(false);\r\n                break;\r\n        }\r\n    };\r\n    Object.defineProperty(UploadTask.prototype, \"snapshot\", {\r\n        get: function () {\r\n            var externalState = taskStateFromInternalTaskState(this.state_);\r\n            return new UploadTaskSnapshot(this.transferred_, this.blob_.size(), externalState, this.metadata_, this, this.ref_);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds a callback for an event.\r\n     * @param type The type of event to listen for.\r\n     */\r\n    UploadTask.prototype.on = function (type, nextOrObserver, error, completed) {\r\n        if (nextOrObserver === void 0) { nextOrObserver = undefined; }\r\n        if (error === void 0) { error = undefined; }\r\n        if (completed === void 0) { completed = undefined; }\r\n        function typeValidator(_p) {\r\n            if (type !== TaskEvent.STATE_CHANGED) {\r\n                throw \"Expected one of the event types: [\" + TaskEvent.STATE_CHANGED + \"].\";\r\n            }\r\n        }\r\n        var nextOrObserverMessage = 'Expected a function or an Object with one of ' +\r\n            '`next`, `error`, `complete` properties.';\r\n        var nextValidator = nullFunctionSpec(true).validator;\r\n        var observerValidator = looseObjectSpec(null, true).validator;\r\n        function nextOrObserverValidator(p) {\r\n            try {\r\n                nextValidator(p);\r\n                return;\r\n            }\r\n            catch (e) { }\r\n            try {\r\n                observerValidator(p);\r\n                var anyDefined = isJustDef(p['next']) ||\r\n                    isJustDef(p['error']) ||\r\n                    isJustDef(p['complete']);\r\n                if (!anyDefined) {\r\n                    throw '';\r\n                }\r\n                return;\r\n            }\r\n            catch (e) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n        }\r\n        var specs = [\r\n            stringSpec(typeValidator),\r\n            looseObjectSpec(nextOrObserverValidator, true),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        validate('on', specs, arguments);\r\n        var self = this;\r\n        function makeBinder(specs) {\r\n            function binder(nextOrObserver, error, opt_complete) {\r\n                if (specs !== null) {\r\n                    validate('on', specs, arguments);\r\n                }\r\n                var observer = new Observer(nextOrObserver, error, completed);\r\n                self.addObserver_(observer);\r\n                return function () {\r\n                    self.removeObserver_(observer);\r\n                };\r\n            }\r\n            return binder;\r\n        }\r\n        function binderNextOrObserverValidator(p) {\r\n            if (p === null) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n            nextOrObserverValidator(p);\r\n        }\r\n        var binderSpecs = [\r\n            looseObjectSpec(binderNextOrObserverValidator),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        var typeOnly = !(isJustDef(nextOrObserver) ||\r\n            isJustDef(error) ||\r\n            isJustDef(completed));\r\n        if (typeOnly) {\r\n            return makeBinder(binderSpecs);\r\n        }\r\n        else {\r\n            return makeBinder(null)(nextOrObserver, error, completed);\r\n        }\r\n    };\r\n    /**\r\n     * This object behaves like a Promise, and resolves with its snapshot data\r\n     * when the upload completes.\r\n     * @param onFulfilled The fulfillment callback. Promise chaining works as normal.\r\n     * @param onRejected The rejection callback.\r\n     */\r\n    UploadTask.prototype.then = function (onFulfilled, onRejected) {\r\n        // These casts are needed so that TypeScript can infer the types of the\r\n        // resulting Promise.\r\n        return this.promise_.then(onFulfilled, onRejected);\r\n    };\r\n    /**\r\n     * Equivalent to calling `then(null, onRejected)`.\r\n     */\r\n    UploadTask.prototype.catch = function (onRejected) {\r\n        return this.then(null, onRejected);\r\n    };\r\n    /**\r\n     * Adds the given observer.\r\n     */\r\n    UploadTask.prototype.addObserver_ = function (observer) {\r\n        this.observers_.push(observer);\r\n        this.notifyObserver_(observer);\r\n    };\r\n    /**\r\n     * Removes the given observer.\r\n     */\r\n    UploadTask.prototype.removeObserver_ = function (observer) {\r\n        remove(this.observers_, observer);\r\n    };\r\n    UploadTask.prototype.notifyObservers_ = function () {\r\n        var _this = this;\r\n        this.finishPromise_();\r\n        var observers = clone$1(this.observers_);\r\n        observers.forEach(function (observer) {\r\n            _this.notifyObserver_(observer);\r\n        });\r\n    };\r\n    UploadTask.prototype.finishPromise_ = function () {\r\n        if (this.resolve_ !== null) {\r\n            var triggered = true;\r\n            switch (taskStateFromInternalTaskState(this.state_)) {\r\n                case TaskState.SUCCESS:\r\n                    async(this.resolve_.bind(null, this.snapshot))();\r\n                    break;\r\n                case TaskState.CANCELED:\r\n                case TaskState.ERROR:\r\n                    var toCall = this.reject_;\r\n                    async(toCall.bind(null, this.error_))();\r\n                    break;\r\n                default:\r\n                    triggered = false;\r\n                    break;\r\n            }\r\n            if (triggered) {\r\n                this.resolve_ = null;\r\n                this.reject_ = null;\r\n            }\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObserver_ = function (observer) {\r\n        var externalState = taskStateFromInternalTaskState(this.state_);\r\n        switch (externalState) {\r\n            case TaskState.RUNNING:\r\n            case TaskState.PAUSED:\r\n                if (observer.next !== null) {\r\n                    async(observer.next.bind(observer, this.snapshot))();\r\n                }\r\n                break;\r\n            case TaskState.SUCCESS:\r\n                if (observer.complete !== null) {\r\n                    async(observer.complete.bind(observer))();\r\n                }\r\n                break;\r\n            case TaskState.CANCELED:\r\n            case TaskState.ERROR:\r\n                if (observer.error !== null) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n                break;\r\n            default:\r\n                // TODO(andysoto): assert(false);\r\n                if (observer.error !== null) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n        }\r\n    };\r\n    /**\r\n     * Resumes a paused task. Has no effect on a currently running or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.resume = function () {\r\n        validate('resume', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.PAUSED ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.RUNNING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Pauses a currently running task. Has no effect on a paused or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.pause = function () {\r\n        validate('pause', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.PAUSING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Cancels a currently running or paused task. Has no effect on a complete or\r\n     * failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.cancel = function () {\r\n        validate('cancel', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.CANCELING);\r\n        }\r\n        return valid;\r\n    };\r\n    return UploadTask;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provides methods to interact with a bucket in the Firebase Storage service.\r\n * @param location An fbs.location, or the URL at\r\n *     which to base this object, in one of the following forms:\r\n *         gs://<bucket>/<object-path>\r\n *         http[s]://firebasestorage.googleapis.com/\r\n *                     <api-version>/b/<bucket>/o/<object-path>\r\n *     Any query or fragment strings will be ignored in the http[s]\r\n *     format. If no value is passed, the storage object will use a URL based on\r\n *     the project ID of the base firebase.App instance.\r\n */\r\nvar Reference = /** @class */ (function () {\r\n    function Reference(authWrapper, location) {\r\n        this.authWrapper = authWrapper;\r\n        if (location instanceof Location) {\r\n            this.location = location;\r\n        }\r\n        else {\r\n            this.location = Location.makeFromUrl(location);\r\n        }\r\n    }\r\n    /**\r\n     * @return The URL for the bucket and path this object references,\r\n     *     in the form gs://<bucket>/<object-path>\r\n     * @override\r\n     */\r\n    Reference.prototype.toString = function () {\r\n        validate('toString', [], arguments);\r\n        return 'gs://' + this.location.bucket + '/' + this.location.path;\r\n    };\r\n    Reference.prototype.newRef = function (authWrapper, location) {\r\n        return new Reference(authWrapper, location);\r\n    };\r\n    Reference.prototype.mappings = function () {\r\n        return getMappings();\r\n    };\r\n    /**\r\n     * @return A reference to the object obtained by\r\n     *     appending childPath, removing any duplicate, beginning, or trailing\r\n     *     slashes.\r\n     */\r\n    Reference.prototype.child = function (childPath) {\r\n        validate('child', [stringSpec()], arguments);\r\n        var newPath = child(this.location.path, childPath);\r\n        var location = new Location(this.location.bucket, newPath);\r\n        return this.newRef(this.authWrapper, location);\r\n    };\r\n    Object.defineProperty(Reference.prototype, \"parent\", {\r\n        /**\r\n         * @return A reference to the parent of the\r\n         *     current object, or null if the current object is the root.\r\n         */\r\n        get: function () {\r\n            var newPath = parent(this.location.path);\r\n            if (newPath === null) {\r\n                return null;\r\n            }\r\n            var location = new Location(this.location.bucket, newPath);\r\n            return this.newRef(this.authWrapper, location);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"root\", {\r\n        /**\r\n         * @return An reference to the root of this\r\n         *     object's bucket.\r\n         */\r\n        get: function () {\r\n            var location = new Location(this.location.bucket, '');\r\n            return this.newRef(this.authWrapper, location);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"bucket\", {\r\n        get: function () {\r\n            return this.location.bucket;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"fullPath\", {\r\n        get: function () {\r\n            return this.location.path;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"name\", {\r\n        get: function () {\r\n            return lastComponent(this.location.path);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"storage\", {\r\n        get: function () {\r\n            return this.authWrapper.service();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Uploads a blob to this object's location.\r\n     * @param data The blob to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.put = function (data, metadata) {\r\n        if (metadata === void 0) { metadata = null; }\r\n        validate('put', [uploadDataSpec(), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('put');\r\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data), metadata);\r\n    };\r\n    /**\r\n     * Uploads a string to this object's location.\r\n     * @param string The string to upload.\r\n     * @param opt_format The format of the string to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.putString = function (string, format, opt_metadata) {\r\n        if (format === void 0) { format = StringFormat.RAW; }\r\n        validate('putString', [\r\n            stringSpec(),\r\n            stringSpec(formatValidator, true),\r\n            metadataSpec(true)\r\n        ], arguments);\r\n        this.throwIfRoot_('putString');\r\n        var data = dataFromString(format, string);\r\n        var metadata = clone(opt_metadata);\r\n        if (!isDef(metadata['contentType']) && isDef(data.contentType)) {\r\n            metadata['contentType'] = data.contentType;\r\n        }\r\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data.data, true), metadata);\r\n    };\r\n    /**\r\n     * Deletes the object at this location.\r\n     * @return A promise that resolves if the deletion succeeds.\r\n     */\r\n    Reference.prototype.delete = function () {\r\n        validate('delete', [], arguments);\r\n        this.throwIfRoot_('delete');\r\n        var self = this;\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = deleteObject(self.authWrapper, self.location);\r\n            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     *     A promise that resolves with the metadata for this object. If this\r\n     *     object doesn't exist or metadata cannot be retreived, the promise is\r\n     *     rejected.\r\n     */\r\n    Reference.prototype.getMetadata = function () {\r\n        validate('getMetadata', [], arguments);\r\n        this.throwIfRoot_('getMetadata');\r\n        var self = this;\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getMetadata(self.authWrapper, self.location, self.mappings());\r\n            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * Updates the metadata for this object.\r\n     * @param metadata The new metadata for the object.\r\n     *     Only values that have been explicitly set will be changed. Explicitly\r\n     *     setting a value to null will remove the metadata.\r\n     * @return A promise that resolves\r\n     *     with the new metadata for this object.\r\n     *     @see firebaseStorage.Reference.prototype.getMetadata\r\n     */\r\n    Reference.prototype.updateMetadata = function (metadata) {\r\n        validate('updateMetadata', [metadataSpec()], arguments);\r\n        this.throwIfRoot_('updateMetadata');\r\n        var self = this;\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = updateMetadata(self.authWrapper, self.location, metadata, self.mappings());\r\n            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * @return A promise that resolves with the download\r\n     *     URL for this object.\r\n     */\r\n    Reference.prototype.getDownloadURL = function () {\r\n        validate('getDownloadURL', [], arguments);\r\n        this.throwIfRoot_('getDownloadURL');\r\n        var self = this;\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getDownloadUrl(self.authWrapper, self.location, self.mappings());\r\n            return self.authWrapper\r\n                .makeRequest(requestInfo, authToken)\r\n                .getPromise()\r\n                .then(function (url) {\r\n                if (url === null) {\r\n                    throw noDownloadURL();\r\n                }\r\n                return url;\r\n            });\r\n        });\r\n    };\r\n    Reference.prototype.throwIfRoot_ = function (name) {\r\n        if (this.location.path === '') {\r\n            throw invalidRootOperation(name);\r\n        }\r\n    };\r\n    return Reference;\r\n}());\n\n/**\r\n * A request whose promise always fails.\r\n * @struct\r\n * @template T\r\n */\r\nvar FailRequest = /** @class */ (function () {\r\n    function FailRequest(error) {\r\n        this.promise_ = reject(error);\r\n    }\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.cancel = function (appDelete) {\r\n        if (appDelete === void 0) { appDelete = false; }\r\n    };\r\n    return FailRequest;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar RequestMap = /** @class */ (function () {\r\n    function RequestMap() {\r\n        this.map_ = {};\r\n        this.id_ = minSafeInteger;\r\n    }\r\n    /**\r\n     * Registers the given request with this map.\r\n     * The request is unregistered when it completes.\r\n     * @param r The request to register.\r\n     */\r\n    RequestMap.prototype.addRequest = function (r) {\r\n        var id = this.id_;\r\n        this.id_++;\r\n        this.map_[id] = r;\r\n        var self = this;\r\n        function unmap() {\r\n            delete self.map_[id];\r\n        }\r\n        r.getPromise().then(unmap, unmap);\r\n    };\r\n    /**\r\n     * Cancels all registered requests.\r\n     */\r\n    RequestMap.prototype.clear = function () {\r\n        forEach(this.map_, function (key, val) {\r\n            if (val) {\r\n                val.cancel(true);\r\n            }\r\n        });\r\n        this.map_ = {};\r\n    };\r\n    return RequestMap;\r\n}());\n\n/**\r\n * @param app If null, getAuthToken always resolves with null.\r\n * @param service The storage service associated with this auth wrapper.\r\n *     Untyped to avoid circular type dependencies.\r\n * @struct\r\n */\r\nvar AuthWrapper = /** @class */ (function () {\r\n    function AuthWrapper(app, maker, requestMaker, service, pool) {\r\n        this.bucket_ = null;\r\n        this.deleted_ = false;\r\n        this.app_ = app;\r\n        if (this.app_ !== null) {\r\n            var options = this.app_.options;\r\n            if (isDef(options)) {\r\n                this.bucket_ = AuthWrapper.extractBucket_(options);\r\n            }\r\n        }\r\n        this.storageRefMaker_ = maker;\r\n        this.requestMaker_ = requestMaker;\r\n        this.pool_ = pool;\r\n        this.service_ = service;\r\n        this.maxOperationRetryTime_ = defaultMaxOperationRetryTime;\r\n        this.maxUploadRetryTime_ = defaultMaxUploadRetryTime;\r\n        this.requestMap_ = new RequestMap();\r\n    }\r\n    AuthWrapper.extractBucket_ = function (config) {\r\n        var bucketString = config[configOption] || null;\r\n        if (bucketString == null) {\r\n            return null;\r\n        }\r\n        var loc = Location.makeFromBucketSpec(bucketString);\r\n        return loc.bucket;\r\n    };\r\n    AuthWrapper.prototype.getAuthToken = function () {\r\n        // TODO(andysoto): remove ifDef checks after firebase-app implements stubs\r\n        // (b/28673818).\r\n        if (this.app_ !== null &&\r\n            isDef(this.app_.INTERNAL) &&\r\n            isDef(this.app_.INTERNAL.getToken)) {\r\n            return this.app_.INTERNAL.getToken().then(function (response) {\r\n                if (response !== null) {\r\n                    return response.accessToken;\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }, function (_error) {\r\n                return null;\r\n            });\r\n        }\r\n        else {\r\n            return resolve(null);\r\n        }\r\n    };\r\n    AuthWrapper.prototype.bucket = function () {\r\n        if (this.deleted_) {\r\n            throw appDeleted();\r\n        }\r\n        else {\r\n            return this.bucket_;\r\n        }\r\n    };\r\n    /**\r\n     * The service associated with this auth wrapper. Untyped to avoid circular\r\n     * type dependencies.\r\n     */\r\n    AuthWrapper.prototype.service = function () {\r\n        return this.service_;\r\n    };\r\n    /**\r\n     * Returns a new firebaseStorage.Reference object referencing this AuthWrapper\r\n     * at the given Location.\r\n     * @param loc The Location.\r\n     * @return Actually a firebaseStorage.Reference, typing not allowed\r\n     *     because of circular dependency problems.\r\n     */\r\n    AuthWrapper.prototype.makeStorageReference = function (loc) {\r\n        return this.storageRefMaker_(this, loc);\r\n    };\r\n    AuthWrapper.prototype.makeRequest = function (requestInfo, authToken) {\r\n        if (!this.deleted_) {\r\n            var request = this.requestMaker_(requestInfo, authToken, this.pool_);\r\n            this.requestMap_.addRequest(request);\r\n            return request;\r\n        }\r\n        else {\r\n            return new FailRequest(appDeleted());\r\n        }\r\n    };\r\n    /**\r\n     * Stop running requests and prevent more from being created.\r\n     */\r\n    AuthWrapper.prototype.deleteApp = function () {\r\n        this.deleted_ = true;\r\n        this.app_ = null;\r\n        this.requestMap_.clear();\r\n    };\r\n    AuthWrapper.prototype.maxUploadRetryTime = function () {\r\n        return this.maxUploadRetryTime_;\r\n    };\r\n    AuthWrapper.prototype.setMaxUploadRetryTime = function (time) {\r\n        this.maxUploadRetryTime_ = time;\r\n    };\r\n    AuthWrapper.prototype.maxOperationRetryTime = function () {\r\n        return this.maxOperationRetryTime_;\r\n    };\r\n    AuthWrapper.prototype.setMaxOperationRetryTime = function (time) {\r\n        this.maxOperationRetryTime_ = time;\r\n    };\r\n    return AuthWrapper;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param f May be invoked\r\n *     before the function returns.\r\n * @param callback Get all the arguments passed to the function\r\n *     passed to f, including the initial boolean.\r\n */\r\nfunction start(f, callback, timeout) {\r\n    // TODO(andysoto): make this code cleaner (probably refactor into an actual\r\n    // type instead of a bunch of functions with state shared in the closure)\r\n    var waitSeconds = 1;\r\n    // Would type this as \"number\" but that doesn't work for Node so \u00af\\_(\u30c4)_/\u00af\r\n    var timeoutId = null;\r\n    var hitTimeout = false;\r\n    var cancelState = 0;\r\n    function canceled() {\r\n        return cancelState === 2;\r\n    }\r\n    var triggeredCallback = false;\r\n    function triggerCallback() {\r\n        if (!triggeredCallback) {\r\n            triggeredCallback = true;\r\n            callback.apply(null, arguments);\r\n        }\r\n    }\r\n    function callWithDelay(millis) {\r\n        timeoutId = setTimeout(function () {\r\n            timeoutId = null;\r\n            f(handler, canceled());\r\n        }, millis);\r\n    }\r\n    function handler(success) {\r\n        var var_args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            var_args[_i - 1] = arguments[_i];\r\n        }\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (success) {\r\n            triggerCallback.apply(null, arguments);\r\n            return;\r\n        }\r\n        var mustStop = canceled() || hitTimeout;\r\n        if (mustStop) {\r\n            triggerCallback.apply(null, arguments);\r\n            return;\r\n        }\r\n        if (waitSeconds < 64) {\r\n            /* TODO(andysoto): don't back off so quickly if we know we're offline. */\r\n            waitSeconds *= 2;\r\n        }\r\n        var waitMillis;\r\n        if (cancelState === 1) {\r\n            cancelState = 2;\r\n            waitMillis = 0;\r\n        }\r\n        else {\r\n            waitMillis = (waitSeconds + Math.random()) * 1000;\r\n        }\r\n        callWithDelay(waitMillis);\r\n    }\r\n    var stopped = false;\r\n    function stop(wasTimeout) {\r\n        if (stopped) {\r\n            return;\r\n        }\r\n        stopped = true;\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (timeoutId !== null) {\r\n            if (!wasTimeout) {\r\n                cancelState = 2;\r\n            }\r\n            clearTimeout(timeoutId);\r\n            callWithDelay(0);\r\n        }\r\n        else {\r\n            if (!wasTimeout) {\r\n                cancelState = 1;\r\n            }\r\n        }\r\n    }\r\n    callWithDelay(0);\r\n    setTimeout(function () {\r\n        hitTimeout = true;\r\n        stop(true);\r\n    }, timeout);\r\n    return stop;\r\n}\r\n/**\r\n * Stops the retry loop from repeating.\r\n * If the function is currently \"in between\" retries, it is invoked immediately\r\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\r\n * after the current invocation finishes iff the current invocation would have\r\n * triggered another retry.\r\n */\r\nfunction stop(id) {\r\n    id(false);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n * @template T\r\n */\r\nvar NetworkRequest = /** @class */ (function () {\r\n    function NetworkRequest(url, method, headers, body, successCodes, additionalRetryCodes, callback, errorCallback, timeout, progressCallback, pool) {\r\n        this.pendingXhr_ = null;\r\n        this.backoffId_ = null;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.canceled_ = false;\r\n        this.appDelete_ = false;\r\n        this.url_ = url;\r\n        this.method_ = method;\r\n        this.headers_ = headers;\r\n        this.body_ = body;\r\n        this.successCodes_ = successCodes.slice();\r\n        this.additionalRetryCodes_ = additionalRetryCodes.slice();\r\n        this.callback_ = callback;\r\n        this.errorCallback_ = errorCallback;\r\n        this.progressCallback_ = progressCallback;\r\n        this.timeout_ = timeout;\r\n        this.pool_ = pool;\r\n        var self = this;\r\n        this.promise_ = make(function (resolve, reject) {\r\n            self.resolve_ = resolve;\r\n            self.reject_ = reject;\r\n            self.start_();\r\n        });\r\n    }\r\n    /**\r\n     * Actually starts the retry loop.\r\n     */\r\n    NetworkRequest.prototype.start_ = function () {\r\n        var self = this;\r\n        function doTheRequest(backoffCallback, canceled) {\r\n            if (canceled) {\r\n                backoffCallback(false, new RequestEndStatus(false, null, true));\r\n                return;\r\n            }\r\n            var xhr = self.pool_.createXhrIo();\r\n            self.pendingXhr_ = xhr;\r\n            function progressListener(progressEvent) {\r\n                var loaded = progressEvent.loaded;\r\n                var total = progressEvent.lengthComputable ? progressEvent.total : -1;\r\n                if (self.progressCallback_ !== null) {\r\n                    self.progressCallback_(loaded, total);\r\n                }\r\n            }\r\n            if (self.progressCallback_ !== null) {\r\n                xhr.addUploadProgressListener(progressListener);\r\n            }\r\n            xhr\r\n                .send(self.url_, self.method_, self.body_, self.headers_)\r\n                .then(function (xhr) {\r\n                if (self.progressCallback_ !== null) {\r\n                    xhr.removeUploadProgressListener(progressListener);\r\n                }\r\n                self.pendingXhr_ = null;\r\n                xhr = xhr;\r\n                var hitServer = xhr.getErrorCode() === ErrorCode.NO_ERROR;\r\n                var status = xhr.getStatus();\r\n                if (!hitServer || self.isRetryStatusCode_(status)) {\r\n                    var wasCanceled = xhr.getErrorCode() === ErrorCode.ABORT;\r\n                    backoffCallback(false, new RequestEndStatus(false, null, wasCanceled));\r\n                    return;\r\n                }\r\n                var successCode = contains$1(self.successCodes_, status);\r\n                backoffCallback(true, new RequestEndStatus(successCode, xhr));\r\n            });\r\n        }\r\n        /**\r\n         * @param requestWentThrough True if the request eventually went\r\n         *     through, false if it hit the retry limit or was canceled.\r\n         */\r\n        function backoffDone(requestWentThrough, status) {\r\n            var resolve = self.resolve_;\r\n            var reject = self.reject_;\r\n            var xhr = status.xhr;\r\n            if (status.wasSuccessCode) {\r\n                try {\r\n                    var result = self.callback_(xhr, xhr.getResponseText());\r\n                    if (isJustDef(result)) {\r\n                        resolve(result);\r\n                    }\r\n                    else {\r\n                        resolve();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            else {\r\n                if (xhr !== null) {\r\n                    var err = unknown();\r\n                    err.setServerResponseProp(xhr.getResponseText());\r\n                    if (self.errorCallback_) {\r\n                        reject(self.errorCallback_(xhr, err));\r\n                    }\r\n                    else {\r\n                        reject(err);\r\n                    }\r\n                }\r\n                else {\r\n                    if (status.canceled) {\r\n                        var err = self.appDelete_\r\n                            ? appDeleted()\r\n                            : canceled();\r\n                        reject(err);\r\n                    }\r\n                    else {\r\n                        var err = retryLimitExceeded();\r\n                        reject(err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.canceled_) {\r\n            backoffDone(false, new RequestEndStatus(false, null, true));\r\n        }\r\n        else {\r\n            this.backoffId_ = start(doTheRequest, backoffDone, this.timeout_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.cancel = function (appDelete) {\r\n        this.canceled_ = true;\r\n        this.appDelete_ = appDelete || false;\r\n        if (this.backoffId_ !== null) {\r\n            stop(this.backoffId_);\r\n        }\r\n        if (this.pendingXhr_ !== null) {\r\n            this.pendingXhr_.abort();\r\n        }\r\n    };\r\n    NetworkRequest.prototype.isRetryStatusCode_ = function (status) {\r\n        // The codes for which to retry came from this page:\r\n        // https://cloud.google.com/storage/docs/exponential-backoff\r\n        var isFiveHundredCode = status >= 500 && status < 600;\r\n        var extraRetryCodes = [\r\n            // Request Timeout: web server didn't receive full request in time.\r\n            408,\r\n            // Too Many Requests: you're getting rate-limited, basically.\r\n            429\r\n        ];\r\n        var isExtraRetryCode = contains$1(extraRetryCodes, status);\r\n        var isRequestSpecificRetryCode = contains$1(this.additionalRetryCodes_, status);\r\n        return isFiveHundredCode || isExtraRetryCode || isRequestSpecificRetryCode;\r\n    };\r\n    return NetworkRequest;\r\n}());\r\n/**\r\n * A collection of information about the result of a network request.\r\n * @param opt_canceled Defaults to false.\r\n * @struct\r\n */\r\nvar RequestEndStatus = /** @class */ (function () {\r\n    function RequestEndStatus(wasSuccessCode, xhr, opt_canceled) {\r\n        this.wasSuccessCode = wasSuccessCode;\r\n        this.xhr = xhr;\r\n        this.canceled = !!opt_canceled;\r\n    }\r\n    return RequestEndStatus;\r\n}());\r\nfunction addAuthHeader_(headers, authToken) {\r\n    if (authToken !== null && authToken.length > 0) {\r\n        headers['Authorization'] = 'Firebase ' + authToken;\r\n    }\r\n}\r\nfunction addVersionHeader_(headers) {\r\n    var number = typeof firebase !== 'undefined' ? firebase.SDK_VERSION : 'AppManager';\r\n    headers['X-Firebase-Storage-Version'] = 'webjs/' + number;\r\n}\r\n/**\r\n * @template T\r\n */\r\nfunction makeRequest(requestInfo, authToken, pool) {\r\n    var queryPart = makeQueryString(requestInfo.urlParams);\r\n    var url = requestInfo.url + queryPart;\r\n    var headers = clone(requestInfo.headers);\r\n    addAuthHeader_(headers, authToken);\r\n    addVersionHeader_(headers);\r\n    return new NetworkRequest(url, requestInfo.method, headers, requestInfo.body, requestInfo.successCodes, requestInfo.additionalRetryCodes, requestInfo.handler, requestInfo.errorHandler, requestInfo.timeout, requestInfo.progressCallback, pool);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A service that provides firebaseStorage.Reference instances.\r\n * @param opt_url gs:// url to a custom Storage Bucket\r\n *\r\n * @struct\r\n */\r\nvar Service = /** @class */ (function () {\r\n    function Service(app, pool, url) {\r\n        this.bucket_ = null;\r\n        function maker(authWrapper, loc) {\r\n            return new Reference(authWrapper, loc);\r\n        }\r\n        this.authWrapper_ = new AuthWrapper(app, maker, makeRequest, this, pool);\r\n        this.app_ = app;\r\n        if (url != null) {\r\n            this.bucket_ = Location.makeFromBucketSpec(url);\r\n        }\r\n        else {\r\n            var authWrapperBucket = this.authWrapper_.bucket();\r\n            if (authWrapperBucket != null) {\r\n                this.bucket_ = new Location(authWrapperBucket, '');\r\n            }\r\n        }\r\n        this.internals_ = new ServiceInternals(this);\r\n    }\r\n    /**\r\n     * Returns a firebaseStorage.Reference for the given path in the default\r\n     * bucket.\r\n     */\r\n    Service.prototype.ref = function (path) {\r\n        function validator(path) {\r\n            if (/^[A-Za-z]+:\\/\\//.test(path)) {\r\n                throw 'Expected child path but got a URL, use refFromURL instead.';\r\n            }\r\n        }\r\n        validate('ref', [stringSpec(validator, true)], arguments);\r\n        if (this.bucket_ == null) {\r\n            throw new Error('No Storage Bucket defined in Firebase Options.');\r\n        }\r\n        var ref = new Reference(this.authWrapper_, this.bucket_);\r\n        if (path != null) {\r\n            return ref.child(path);\r\n        }\r\n        else {\r\n            return ref;\r\n        }\r\n    };\r\n    /**\r\n     * Returns a firebaseStorage.Reference object for the given absolute URL,\r\n     * which must be a gs:// or http[s]:// URL.\r\n     */\r\n    Service.prototype.refFromURL = function (url) {\r\n        function validator(p) {\r\n            if (!/^[A-Za-z]+:\\/\\//.test(p)) {\r\n                throw 'Expected full URL but got a child path, use ref instead.';\r\n            }\r\n            try {\r\n                Location.makeFromUrl(p);\r\n            }\r\n            catch (e) {\r\n                throw 'Expected valid full URL but got an invalid one.';\r\n            }\r\n        }\r\n        validate('refFromURL', [stringSpec(validator, false)], arguments);\r\n        return new Reference(this.authWrapper_, url);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"maxUploadRetryTime\", {\r\n        get: function () {\r\n            return this.authWrapper_.maxUploadRetryTime();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Service.prototype.setMaxUploadRetryTime = function (time) {\r\n        validate('setMaxUploadRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.authWrapper_.setMaxUploadRetryTime(time);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"maxOperationRetryTime\", {\r\n        get: function () {\r\n            return this.authWrapper_.maxOperationRetryTime();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Service.prototype.setMaxOperationRetryTime = function (time) {\r\n        validate('setMaxOperationRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.authWrapper_.setMaxOperationRetryTime(time);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"app\", {\r\n        get: function () {\r\n            return this.app_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Service.prototype, \"INTERNAL\", {\r\n        get: function () {\r\n            return this.internals_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Service;\r\n}());\r\n/**\r\n * @struct\r\n */\r\nvar ServiceInternals = /** @class */ (function () {\r\n    function ServiceInternals(service) {\r\n        this.service_ = service;\r\n    }\r\n    /**\r\n     * Called when the associated app is deleted.\r\n     * @see {!fbs.AuthWrapper.prototype.deleteApp}\r\n     */\r\n    ServiceInternals.prototype.delete = function () {\r\n        this.service_.authWrapper_.deleteApp();\r\n        return resolve(undefined);\r\n    };\r\n    return ServiceInternals;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Storage.\r\n */\r\nvar STORAGE_TYPE = 'storage';\r\nfunction factory(app, unused, opt_url) {\r\n    return new Service(app, new XhrIoPool(), opt_url);\r\n}\r\nfunction registerStorage(instance) {\r\n    var namespaceExports = {\r\n        // no-inline\r\n        TaskState: TaskState,\r\n        TaskEvent: TaskEvent,\r\n        StringFormat: StringFormat,\r\n        Storage: Service,\r\n        Reference: Reference\r\n    };\r\n    instance.INTERNAL.registerService(STORAGE_TYPE, factory, namespaceExports, undefined, \r\n    // Allow multiple storage instances per app.\r\n    true);\r\n}\r\nregisterStorage(firebase);\n\nexports.registerStorage = registerStorage;\n//# sourceMappingURL=index.cjs.js.map\n\n};"],
"names":["shadow$provide","global","process","require","module","exports","shadow$shims","unknown","FirebaseStorageError","Code","UNKNOWN","message","canceled","CANCELED","cannotSliceBlob","CANNOT_SLICE_BLOB","invalidArgument","index","fnName","INVALID_ARGUMENT","appDeleted","APP_DELETED","invalidFormat","format","INVALID_FORMAT","internalError","INTERNAL_ERROR","formatValidator","stringFormat","StringFormat","RAW","BASE64","BASE64URL","DATA_URL","dataFromString","string","StringData","utf8Bytes_","base64Bytes_","parts","DataURLParts","base64","decoded","decodeURIComponent","e","contentType","b","i","length","c","charCodeAt","push","lo","hi","Uint8Array","hasMinus","indexOf","hasUnder","invalidChar","hasPlus","hasSlash","replace","bytes","atob","array","taskStateFromInternalTaskState","state","InternalTaskState","RUNNING","PAUSING","CANCELING","TaskState","PAUSED","SUCCESS","ERROR","forEach","obj","f","key","Object","prototype","hasOwnProperty","call","clone","val","isJustDef","p","isObject","isString","String","isNativeBlob","isNativeBlobDefined","Blob","jsonObjectOrNull","s","JSON","parse","Array","isArray","child","path","childPath","canonicalChildPath","split","filter","component","join","lastComponent","lastIndexOf","slice","makeNormalUrl","urlPart","makeQueryString","params","encode","encodeURIComponent","queryPart","nextPart","noXform_","metadata","value","getMappings","mappings_","mappings","Mapping","nameMapping","xform","mappingsXformPath","fullPath","valid","sizeMapping","xformSize","size","addRef","authWrapper","defineProperty","get","generateRef","loc","Location","bucket","makeStorageReference","fromResourceString","resourceString","len","mapping","local","server","downloadUrlFromResourceString","tokens","tokensList","map","urls","token","base","queryString","alt","toResourceString","resource","writable","stringify","metadataValidator","validate","name","specs","passed","minArgs","maxArgs","optional","countPart","plural","INVALID_ARGUMENT_COUNT","validator","Error","and_","v1","v2","stringSpec","opt_validator","opt_optional","stringValidator","ArgSpec","uploadDataSpec","ArrayBuffer","nonNegativeNumberSpec","Number","looseObjectSpec","undefined","nullFunctionSpec","getBlob","var_args","_i","arguments","BlobBuilder","WebKitBlobBuilder","bb","append","handlerCheck","cndn","metadataHandler","handler","xhr","text","downloadUrlHandler","sharedErrorHandler","location","errorHandler","err","getStatus","UNAUTHENTICATED","QUOTA_EXCEEDED","UNAUTHORIZED","newErr","setServerResponseProp","serverResponseProp","objectErrorHandler","shared","OBJECT_NOT_FOUND","getMetadata","fullServerUrl","url","timeout","maxOperationRetryTime","requestInfo","RequestInfo","method","getDownloadUrl","deleteObject","successCodes","metadataForUpload_","blob","opt_metadata","type","multipartUpload","bucketOnlyServerUrl","headers","str","Math","random","toString","boundary","metadataString","body","FbsBlob","urlParams","maxUploadRetryTime","uploadData","checkResumeHeader_","opt_allowed","status","getResponseHeader","createResumableUpload","getResumableUploadStatus","sizeString","parseInt","isNaN","ResumableUploadStatus","continueResumableUpload","chunkSize","opt_status","opt_progressCallback","current","total","SERVER_FILE_WRONG_SIZE","bytesToUpload","bytesLeft","min","startByte","uploadCommand","uploadStatus","newCurrent","progressCallback","async","argsToForward","Promise","resolve","then","apply","start","callback","triggerCallback","triggeredCallback","callWithDelay","millis","timeoutId","setTimeout","cancelState","success","hitTimeout","waitSeconds","waitMillis","stop","wasTimeout","stopped","clearTimeout","makeRequest","authToken","pool","number","firebase","SDK_VERSION","NetworkRequest","additionalRetryCodes","factory","app","unused","opt_url","Service","XhrIoPool","registerStorage","instance","INTERNAL","registerService","STORAGE_TYPE","namespaceExports","TaskEvent","Storage","Reference","_interopDefault","ex","code","code_","message_","serverResponse_","name_","codeProp","FirebaseStorageError.prototype.codeProp","codeEquals","FirebaseStorageError.prototype.codeEquals","FirebaseStorageError.prototype.serverResponseProp","FirebaseStorageError.prototype.setServerResponseProp","serverResponse","enumerable","configurable","BUCKET_NOT_FOUND","PROJECT_NOT_FOUND","RETRY_LIMIT_EXCEEDED","INVALID_CHECKSUM","INVALID_EVENT_NAME","INVALID_URL","INVALID_DEFAULT_BUCKET","NO_DEFAULT_BUCKET","NO_DOWNLOAD_URL","INVALID_ROOT_OPERATION","data","opt_contentType","dataURL","matches","match","middle","end","substring","rest","STATE_CHANGED","ErrorCode","NetworkXhrIo","_this","sent_","xhr_","XMLHttpRequest","errorCode_","NO_ERROR","sendPromise_","resolver","reject","addEventListener","event","ABORT","NETWORK_ERROR","send","NetworkXhrIo.prototype.send","opt_body","opt_headers","open","setRequestHeader","getErrorCode","NetworkXhrIo.prototype.getErrorCode","NetworkXhrIo.prototype.getStatus","getResponseText","NetworkXhrIo.prototype.getResponseText","responseText","abort","NetworkXhrIo.prototype.abort","NetworkXhrIo.prototype.getResponseHeader","header","addUploadProgressListener","NetworkXhrIo.prototype.addUploadProgressListener","listener","upload","removeUploadProgressListener","NetworkXhrIo.prototype.removeUploadProgressListener","removeEventListener","createXhrIo","XhrIoPool.prototype.createXhrIo","path_","Location.prototype.fullServerUrl","Location.prototype.bucketOnlyServerUrl","makeFromBucketSpec","Location.makeFromBucketSpec","bucketString","bucketLocation","makeFromUrl","Location.makeFromUrl","groups","regex","gsRegex","indices","gsIndices","postModify","gsModify","charAt","httpRegex","httpIndices","httpModify","group","captures","exec","bucketValue","pathValue","opt_local","opt_writable","opt_xform","self","this.validator","opt_elideCopy","blobType","data_","byteLength","set","size_","type_","FbsBlob.prototype.size","FbsBlob.prototype.type","FbsBlob.prototype.slice","endByte","realBlob","webkitSlice","mozSlice","sliced","buffer","FbsBlob.getBlob","blobby","uint8Arrays","finalLength_1","merged_1","index_1","FbsBlob.prototype.uploadData","finalized","Observer","nextOrObserver","opt_error","opt_complete","next","error","complete","UploadTaskSnapshot","bytesTransferred","totalBytes","task","ref","UploadTask","transferred_","needToFetchMetadata_","needToFetchStatus_","observers_","request_","uploadUrl_","error_","chunkMultiplier_","reject_","resolve_","ref_","authWrapper_","location_","blob_","metadata_","resumable_","shouldDoResumable_","state_","errorHandler_","this.errorHandler_","completeTransitions_","transition_","metadataErrorHandler_","this.metadataErrorHandler_","promise_","start_","makeProgressCallback_","UploadTask.prototype.makeProgressCallback_","sizeBefore","loaded","updateProgress_","UploadTask.prototype.shouldDoResumable_","UploadTask.prototype.start_","createResumable_","fetchStatus_","fetchMetadata_","continueUpload_","oneShotUpload_","resolveToken_","UploadTask.prototype.resolveToken_","getAuthToken","UploadTask.prototype.createResumable_","createRequest","getPromise","UploadTask.prototype.fetchStatus_","statusRequest","UploadTask.prototype.continueUpload_","resumableUploadChunkSize","uploadRequest","newStatus","increaseMultiplier_","UploadTask.prototype.increaseMultiplier_","UploadTask.prototype.fetchMetadata_","metadataRequest","UploadTask.prototype.oneShotUpload_","multipartRequest","UploadTask.prototype.updateProgress_","transferred","old","notifyObservers_","UploadTask.prototype.transition_","cancel","wasPaused","UploadTask.prototype.completeTransitions_","externalState","on","UploadTask.prototype.on","completed","nextOrObserverValidator","nextValidator","observerValidator","nextOrObserverMessage","makeBinder","binder","observer","addObserver_","removeObserver_","typeValidator","_p","binderSpecs","binderNextOrObserverValidator","UploadTask.prototype.then","onFulfilled","onRejected","catch","UploadTask.prototype.catch","UploadTask.prototype.addObserver_","notifyObserver_","UploadTask.prototype.removeObserver_","splice","UploadTask.prototype.notifyObservers_","finishPromise_","observers","UploadTask.prototype.finishPromise_","triggered","bind","snapshot","UploadTask.prototype.notifyObserver_","resume","UploadTask.prototype.resume","pause","UploadTask.prototype.pause","UploadTask.prototype.cancel","Reference.prototype.toString","newRef","Reference.prototype.newRef","Reference.prototype.mappings","Reference.prototype.child","newPath","service","put","Reference.prototype.put","throwIfRoot_","putString","Reference.prototype.putString","delete","Reference.prototype.delete","Reference.prototype.getMetadata","updateMetadata","Reference.prototype.updateMetadata","getDownloadURL","Reference.prototype.getDownloadURL","Reference.prototype.throwIfRoot_","FailRequest","FailRequest.prototype.getPromise","FailRequest.prototype.cancel","appDelete","RequestMap","map_","id_","minSafeInteger","addRequest","RequestMap.prototype.addRequest","r","unmap","id","clear","RequestMap.prototype.clear","AuthWrapper","maker","requestMaker","bucket_","deleted_","app_","options","extractBucket_","storageRefMaker_","requestMaker_","pool_","service_","maxOperationRetryTime_","defaultMaxOperationRetryTime","maxUploadRetryTime_","defaultMaxUploadRetryTime","requestMap_","AuthWrapper.extractBucket_","config","AuthWrapper.prototype.getAuthToken","getToken","response","accessToken","_error","AuthWrapper.prototype.bucket","AuthWrapper.prototype.service","AuthWrapper.prototype.makeStorageReference","AuthWrapper.prototype.makeRequest","request","deleteApp","AuthWrapper.prototype.deleteApp","AuthWrapper.prototype.maxUploadRetryTime","setMaxUploadRetryTime","AuthWrapper.prototype.setMaxUploadRetryTime","time","AuthWrapper.prototype.maxOperationRetryTime","setMaxOperationRetryTime","AuthWrapper.prototype.setMaxOperationRetryTime","errorCallback","backoffId_","pendingXhr_","appDelete_","canceled_","url_","method_","headers_","body_","successCodes_","additionalRetryCodes_","callback_","errorCallback_","progressCallback_","timeout_","NetworkRequest.prototype.start_","doTheRequest","backoffCallback","progressListener","progressEvent","lengthComputable","RequestEndStatus","hitServer","isRetryStatusCode_","wasCanceled","successCode","backoffDone","requestWentThrough","wasSuccessCode","result","NetworkRequest.prototype.getPromise","NetworkRequest.prototype.cancel","NetworkRequest.prototype.isRetryStatusCode_","isFiveHundredCode","isExtraRetryCode","extraRetryCodes","isRequestSpecificRetryCode","opt_canceled","authWrapperBucket","internals_","ServiceInternals","Service.prototype.ref","test","refFromURL","Service.prototype.refFromURL","Service.prototype.setMaxUploadRetryTime","Service.prototype.setMaxOperationRetryTime","ServiceInternals.prototype.delete"]
}
