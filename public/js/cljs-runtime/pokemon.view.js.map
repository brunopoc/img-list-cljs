{"version":3,"sources":["pokemon/view.cljs"],"mappings":"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","names":["pokemon.view/pokemon-count","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","pokemon.view/result","pokemon.view/handle-response","response","pokemon.view/pokemon-fetch","variable","query","js/fetch","cljs.core/clj->js","js/JSON.stringify","cljs.core/reset!","cljs.core.js__GT_clj.cljs$core$IFn$_invoke$arity$1","clojure.walk/keywordize-keys","pokemon.view/load-pkm-list","p1__36468#","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2","cljs.core/deref","pokemon.queries/pokemons","value","G__36469","re-frame.core/dispatch","pokemon.view/load-pkm","name","pokemon.queries/pokemon","G__36470","pokemon.view/pokemon-info","mypokemon","iter__4523__auto__","s__36472","cljs.core/LazySeq","temp__5720__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4521__auto__","size__4522__auto__","cljs.core/count","b__36474","cljs.core/chunk-buffer","i__36473","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__36471","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","types","pokemon.view/pokemon-list-render","s__36476","b__36478","i__36477","iter__36475","pokemon","G__36479","re-frame.core/subscribe","pokemon.view/pkm-search","e","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","G__36480","pokemon.view/show","G__36481","cljs.core/chunk-first"],"sourcesContent":["(ns pokemon.view\n  (:require\n   [re-frame.core :as rf]\n   [reagent.core :as r]\n   [clojure.walk :as walk]\n   [pokemon.queries :as q]\n   ))\n\n(def pokemon-count (r/atom 0))\n(def result (r/atom {}))\n\n(defn handle-response [response]\n  (.json response))\n\n;;Request com JS/Fetch\n(defn pokemon-fetch [variable query]\n  (-> (js/fetch \"https://graphql-pokemon.now.sh/\"\n                (clj->js {:method  \"POST\"\n                          :headers {\"Content-Type\" \"application/json\"}\n                          :body    (-> {:query query\n                                        :variables variable}\n                                       clj->js\n                                       js/JSON.stringify)}))\n      (.then handle-response)\n      (.then (fn [response]\n               (reset! result (:data (-> (js->clj response)\n                                                       walk/keywordize-keys)))))))\n\n(defn load-pkm-list []\n  (swap! pokemon-count #(+ % 5))\n  (-> (pokemon-fetch {:first @pokemon-count} q/pokemons)\n      (.then (fn [value] (rf/dispatch [:save-pkm-list (:pokemons value)])))))\n\n(defn load-pkm [name]\n  (-> (pokemon-fetch {:name name} q/pokemon)\n      (.then (fn [value] (rf/dispatch [:save-pkm (:pokemon value)])))))\n\n(load-pkm-list)\n(load-pkm \"Bulbasaur\")\n\n(defn pokemon-info [mypokemon]\n  [:div [:div.name {:style {:color \"#F4F4F4\"\n                            :font-size \"20px\"\n                            :margin-bottom \"20px\"}}\n         (:name mypokemon)\n         \" #\" (:number mypokemon)]\n   [:img.br3 {:style {:height \"200px\"\n                      :width \"200px\"\n                      :background-color \"#fff\"\n                      :margin-bottom \"20px\"}\n              :src (:image mypokemon)}]\n   [:div.pkmtype {:style {:color \"#F4F4F4\"\n                          :font-size \"20px\"\n                          :margin-bottom \"20px\"\n                          :text-align \"center\"}}\n    (for [types (:types mypokemon)]\n      (str types \" \"))]])\n\n(defn pokemon-list-render []\n  [:div.flex.flex-column.items-center [:p {:style {:font-size \"24px\" :margin \"10px 0px\"}} \"Lista de Pokemons\"]\n   [:button.pointer {:style {:padding \"10px\"\n                             :background-color \"#800000\"\n                             :border \"1px solid #6A0000\"\n                             :color \"#FFF\"\n                             :border-radius \"10px\"}\n                     :on-click load-pkm-list} \"Load more ...\"]\n   [:ul {:style {:color \"#F4F4F4\"}}\n    (for [pokemon @(rf/subscribe [:get-pkm-list])]\n      [:li.pointer {:key (:id pokemon) :style {:margin \"5px\"} :on-click #(load-pkm (:name pokemon))} (str \"#\" (:number pokemon)) (str \" \" (:name pokemon))])]])\n\n(defn pkm-search [e]\n  (when (= (-> e .-key) \"Enter\")\n    (-> (pokemon-fetch {:name (-> e .-target .-value)} q/pokemon)\n        (.then (fn [value] (rf/dispatch [:save-pkm (:pokemon value)]))))))\n\n;Render Principal\n(defn show []\n  [:div.main.flex.justify-center\n   {:style {:margin \"10% 0px\"\n            :width \"70%\"\n            :border-radius \"10px\"\n            :border \"1px solid #910000\"\n            :padding \"10px 10px 20px 10px\"\n            :background-color \"#C60000\"}}\n   [:div.flex.flex-column.items-center\n    [:p {:style {:font-size \"34px\"}} \"Pokemon\"]\n    [:input.br3 {:type \"text\" \n                 :style {:margin-bottom \"20px\"\n                         :width \"250px\"\n                         :padding \"10px\" \n                         :font-size \"14px\"\n                         :border \"unset\"}\n                 :on-key-press pkm-search\n                 :placeholder \"Pesquisar o nome do Pokemon ...\"}]\n    [pokemon-info @(rf/subscribe [:get-pkm])]\n    [pokemon-list-render]\n    ]])"]}